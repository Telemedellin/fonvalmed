var projekktorShare=function(){};jQuery(function(t){projekktorShare.prototype={_controlHideTimer:null,_wasPlaying:!1,_noFadeIn:!1,embPopup:null,socialLink:!1,socialSidebar:null,socialPopup:null,socialButtons:[],config:{fadedelay:1800,embed:{code:'<iframe id="%{embedid}" src="%{playerurl}#%{ID}" width="640" height="385" webkitAllowFullScreen mozallowfullscreen allowFullScreen frameborder="0"></iframe>',buttonText:"embed",headlineText:"Copy this:",closeText:"Close Window",descText:"This is the embed code for the current video which supports iPad, iPhone, Flash and native players."},links:{twitter:{buttonText:"Twitter",text:"I found a cool HTML5 video player. Check this out: http://www.projekktor.com",code:"http://twitter.com/share?url=%{pageurl}&text=%{text}&via=projekktor"},facebook:{buttonText:"Facebook",text:"I found a cool HTML5 video player. Check this out: http://www.projekktor.com",code:"http://www.facebook.com/sharer.php?u=%{pageurl}&t=%{text}"}}},initialize:function(){this.drawSidebar(),1==this.getConfig("iframe")&&(this.drawPopup(),this.addTool(this.getConfig("embed"),"embed"));for(var t in this.getConfig("links"))this.addTool(this.getConfig("links")[t],t);this.pluginReady=!0},itemHandler:function(){this._noFadeIn=!1;try{this.socialLink=this.getConfig("link")?this.getConfig("link"):this.pp.getIframeWindow().attr("location")}catch(t){this.socialLink=this.getConfig("link")}for(var e=0;e<this.getConfig("links").length;e++)this.toggleTool(this.getConfig("links")[e].domId,this.socialLink===!1)},errorHandler:function(){this._noFadeIn=!0,this.hideSidebar(!0)},drawSidebar:function(){this.socialSidebar=this.applyToPlayer(t("<div/>").addClass("socialbar"))},drawPopup:function(){this.socialPopup=this.applyToPlayer(t("<div/>").addClass("socialpopup"),"popup")},openWindow:function(t){this._wasPlaying="PLAYING"===this.pp.getState(),this._wasPlaying===!0&&this.pp.setPause(),this[t+"FillWindow"](this.socialPopup),this.socialSidebar.hide(),this.socialPopup.show()},closeWindow:function(){this.socialSidebar.show(),this.socialPopup.hide().html(""),this._wasPlaying===!0&&this.pp.setPlay()},openURL:function(t){var e=window;return e.open(t),!1},addTool:function(e,i){var s=this,a=null,n="embed"==i?"embedClick":"buttonClick";0!=e.code&&(0==this.playerDom.find("."+this.getCN("shareicn_"+i)).length?this.socialSidebar&&e.buttonText&&(a=t("<div/>").html(e.buttonText).addClass(this.getCN("socialbutton")).addClass(this.getCN(i)).appendTo(this.socialSidebar)):a=this.playerDom.find("."+this.getCN("shareicn_"+i)),a&&a.click(function(t){t.stopPropagation(),s[n](e)}),this.socialButtons.push())},toggleTool:function(e,i){var s=this;t.each(this.playerDom.find("."+this.getCN("socialbutton")),function(){t(this).attr("id")===s.pp.getId()+"_"+e&&(i===!0?t(this).hide():t(this).show())})},hideSidebar:function(){clearTimeout(this._controlHideTimer),this.setActive(this.socialSidebar,!1)},showSidebar:function(){var t=this;this._noFadeIn||this.pp.getState("IDLE")||(clearTimeout(this._controlHideTimer),this.setActive(this.socialSidebar,!0),this._controlHideTimer=setTimeout(function(){t.hideSidebar()},this.getConfig("fadedelay")))},mousemoveHandler:function(){this.showSidebar()},embedClick:function(){this.openWindow("embed")},embedFillWindow:function(e){var i=this;t("<p/>").appendTo(e).html(this.getConfig("embed").descText),t("<p/>").appendTo(e).html(this.getConfig("embed").headlineText),t("<textarea/>").appendTo(e).attr("readonly","readonly").val(this.getEmbedCode()).click(function(){this.select()}).focus(function(){this.select()}),t("<a/>").appendTo(e).html(this.getConfig("embed").closeText).click(function(){i.closeWindow()})},getEmbedCode:function(){var t=this.getConfig("embed").code,e={};e.embedid=$p.utils.randomId(8),e.playerurl=window.location.href+window.location.hash,e.ID=this.pp.getItem().ID;for(var i in e)t=$p.utils.parseTemplate(t,e);return t},buttonClick:function(t){var e={};try{e.text=escape(t.text||"")}catch(i){}e.pageurl=escape(this.socialLink||"");for(var s in e)t.code=$p.utils.parseTemplate(t.code,e);this.openURL(t.code)}}});