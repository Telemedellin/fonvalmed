!function(t){t.TS_VCSC_ClassyGradient=function(i,n){var e,s,r,a,o,d,c,g,h,l,u={gradient:"0% #02CDE8, 100% #000000",orientation:"top",type:"linear",shape:"ellipse",svg:!1,webkit:!1,width:300,height:18,point:8,target:null,onChange:function(){},onInit:function(){}},f=t(i),p=new Array;return this.settings={},this.__constructor=function(){return this.settings=t.extend({},u,n),this.update(),this.settings.onInit(),this},this.update=function(){this._setupPoints(),this._setup(),this._render()},this.getCSS=function(){var i="",n=!1,e=!1,s="top",r="ellipse",a="linear",o="0%",d="100%",c="50%",g="50%",h="50%",l="left bottom";if(s=this.settings.orientation,a=this.settings.type,r=this.settings.shape,n=this.settings.svg,e=this.settings.webkit,"left"===s&&(o="100%",d="0%",l="right top"),n)if("linear"==a)var u='<svg xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gradient" x1="0%" y1="0%" x2="'+o+'" y2="'+d+'">';else var u='<svg xmlns="http://www.w3.org/2000/svg"><defs><radialGradient id="gradient" cx="50%" cy="50%" r="'+c+'" fx="'+g+'" fy="'+h+'">';if("linear"==a)var f="-webkit-gradient(linear, left top, "+l;else var f="-webkit-gradient(radial, center center, 0px, center center, 100%";var v="";return t.each(p,function(t,i){f+=", color-stop("+i[0]+", "+i[1]+")",v+=","+i[1]+" "+i[0],n&&(u+='<stop offset="'+i[0]+'" style="stop-color:'+i[1]+';" />')}),f+=")",v=v.substr(1),n&&(u+="linear"==a?'</linearGradient></defs><rect fill="url(#gradient)" height="100%" width="100%" /></svg>':'</radialGradient></defs><rect fill="url(#gradient)" height="100%" width="100%" /></svg>',u=this._base64(u),i+="background: url(data:image/svg+xml;base64,"+u+");\n"),i+="background: "+f+";\n","linear"==a?(i+="background: -moz-linear-gradient("+s+","+v+");\n",i+="background: -webkit-linear-gradient("+s+","+v+");\n",i+="background: -o-linear-gradient("+s+","+v+");\n",i+="background: -ms-linear-gradient("+s+","+v+");\n",i+="background: linear-gradient("+("left"==s?"to right":"top"==s?"to bottom":s)+","+v+");"):(i+="background: -moz-radial-gradient("+r+","+v+");\n",i+="background: -webkit-radial-gradient("+r+","+v+");\n",i+="background: -o-radial-gradient("+r+","+v+");\n",i+="background: -ms-radial-gradient("+r+","+v+");\n",i+="background: radial-gradient("+r+","+v+");"),i},this.getArray=function(){return p},this.getString=function(){var i="";return t.each(p,function(t,n){i+=n[0]+" "+n[1]+","}),i=i.substr(0,i.length-1)},this.setOrientation=function(t,i,n){this.settings.orientation=t,this.settings.type=i,this.settings.shape=n,this._renderToTarget()},this._setupPoints=function(){p=new Array,p=t.isArray(this.settings.gradient)?this.settings.gradient:this._getGradientFromString(this.settings.gradient)},this._setup=function(){var i=this;f.empty(),e=t('<div class="ClassyGradient"></div>'),s=t('<canvas class="canvas" width="'+this.settings.width+'" height="'+this.settings.height+'"></canvas>'),e.append(s),h=s.get(0).getContext("2d"),r=t('<div class="points"></div>'),r.css("width",this.settings.width+Math.round(this.settings.point/2+1)+"px"),e.append(r),a=t('<div class="info"></div>'),a.append('<div class="arrow"></div>'),e.append(a),o=t('<div class="content"></div>'),a.append(o),f.hover(function(){f.addClass("hover")},function(){f.removeClass("hover")}),d=t('<div class="point-color"><div style="background-color: #00ff00"></div></div>'),c=t('<span class="point-position">%</span>'),g=t('<a href="#" class="delete"></a>'),o.append(d,c,g),f.append(e),d.ColorPicker({flat:!1,color:"#00ff00",onSubmit:function(t,n){f.find(".point-color div").css("backgroundColor","#"+n),l.css("backgroundColor","#"+n),i._renderCanvas(),i._renderToTarget()},onChange:function(t,n){f.find(".point-color div").css("backgroundColor","#"+n),l.css("backgroundColor","#"+n),i._renderCanvas(),i._renderToTarget()}}),t(document).bind("click",function(){f.is(".hover")||a.hide("fast")}),s.unbind("click"),s.bind("click",function(n){var e=s.offset(),a=n.pageX-e.left;a=Math.round(100*a/i.settings.width);var o="#000000",d=999999999999;t.each(p,function(t,i){parseInt(i[0])<a&&a-parseInt(i[0])<d?(d=a-parseInt(i[0]),o=i[1]):parseInt(i[0])>a&&parseInt(i[0])-a<d&&(d=parseInt(i[0])-a,o=i[1])}),p.push([a+"%",o]),p.sort(i._sortByPosition),i._render(),t.each(p,function(t,n){n[0]==a+"%"&&i._selectPoint(r.find(".point:eq("+t+")"))})})},this._render=function(){this._initGradientPoints(),this._renderCanvas(),this._renderToTarget()},this._initGradientPoints=function(){var i=this;r.empty(),t.each(p,function(t,n){r.append('<div class="point" style="background-color: '+n[1]+"; left:"+parseInt(n[0])*i.settings.width/100+'px;"></div>')}),r.find(".point").css("width",this.settings.point+"px").css("height",this.settings.point+"px").mouseup(function(){i._selectPoint(this)}).draggable({axis:"x",containment:"parent",drag:function(){i._selectPoint(this),i._renderCanvas(),i._renderToTarget()}})},this._selectPoint=function(i){var n=this;l=t(i);var e=t(i).css("backgroundColor"),s=parseInt(t(i).css("left"));s=Math.round(s/this.settings.width*100),e=e.substr(4,e.length),e=e.substr(0,e.length-1),d.ColorPickerSetColor(this._rgbToHex(e.split(","))),d.find("div").css("backgroundColor",this._rgbToHex(e.split(","))),c.html("Position: "+s+"%"),g.unbind("click").bind("click",function(){return p.length>1&&(p.splice(l.index(),1),n._render(),f.find(".info").hide("fast")),!1}),f.find(".info").css("marginLeft",parseInt(t(i).css("left"))-30+"px").show("fast")},this._renderCanvas=function(){var i=this;p=new Array,f.find(".point").each(function(n,e){var s=Math.round(parseInt(t(e).css("left"))/i.settings.width*100),r=t(e).css("backgroundColor").substr(4,t(e).css("backgroundColor").length-5);r=i._rgbToHex(r.split(",")),p.push([s+"%",r])}),p.sort(i._sortByPosition),this._renderToCanvas(),this.settings.onChange(this.getString(),this.getCSS(),this.getArray())},this._renderToElement=function(i,n){var e="0%",r="100%",a="50%",d="50%",c="50%",g="left bottom",h=!1,l="top",u="ellipse",f="linear";if(l=this.settings.orientation,f=this.settings.type,u=this.settings.shape,h=this.settings.svg,(i===s||"left"===l)&&(e="100%",r="0%",g="right top"),"linear"==f){if(h)var p='<svg xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gradient" x1="0%" y1="0%" x2="'+e+'" y2="'+r+'">';var v="-webkit-gradient(linear, left top, "+g}else{if(h)var p='<svg xmlns="http://www.w3.org/2000/svg"><defs><radialGradient id="gradient" cx="50%" cy="50%" r="'+a+'" fx="'+d+'" fy="'+c+'">';var v="-webkit-gradient(radial, center center, 0px, center center, 100%"}var b="";if(t.each(n,function(t,i){v+=", color-stop("+i[0]+", "+i[1]+")",b+=","+i[1]+" "+i[0],h&&(p+='<stop offset="'+i[0]+'" style="stop-color:'+i[1]+';" />')}),v+=")",b=b.substr(1),h&&(p+="linear"==f?"</linearGradient></defs>":"</radialGradient></defs>"),i===o){var k=parseInt(o.css("borderRadius"));h&&(p+='<rect fill="url(#gradient)" height="100%" width="100%" rx="'+k+'" ry="'+k+'" />')}else h&&(p+='<rect fill="url(#gradient)" height="100%" width="100%" />');h&&(p+="</svg>",p=this._base64(p),i.css("background","url(data:image/svg+xml;base64,"+p+")")),i.css("background",v),"linear"==f?(i.css("background","-moz-linear-gradient("+l+","+b+")"),i.css("background","-webkit-linear-gradient("+l+","+b+")"),i.css("background","-o-linear-gradient("+l+","+b+")"),i.css("background","-ms-linear-gradient("+l+","+b+")"),i.css("background","linear-gradient("+("left"==l?"to right":"top"==l?"to bottom":l)+","+b+")")):(i.css("background","-moz-radial-gradient("+u+","+b+")"),i.css("background","-webkit-radial-gradient("+u+","+b+")"),i.css("background","-o-radial-gradient("+u+","+b+")"),i.css("background","-ms-radial-gradient("+u+","+b+")"),i.css("background","radial-gradient("+u+","+b+")"))},this._renderToTarget=function(){null!==this.settings.target&&this._renderToElement(t(this.settings.target),p)},this._renderToCanvas=function(){var i=h.createLinearGradient(0,0,this.settings.width,0);t.each(p,function(t,n){i.addColorStop(parseInt(n[0])/100,n[1])}),h.clearRect(0,0,this.settings.width,this.settings.height),h.fillStyle=i,h.fillRect(0,0,this.settings.width,this.settings.height),this.settings.onChange(this.getString(),this.getCSS(),this.getArray())},this._getGradientFromString=function(i){var n=new Array,e=i.split(",");return t.each(e,function(t,i){var e;"100"==i.substr(i.indexOf("%")-3,i.indexOf("%"))||"100%"==i.substr(i.indexOf("%")-3,i.indexOf("%"))?e="100%":i.indexOf("%")>1?(e=parseInt(i.substr(i.indexOf("%")-2,i.indexOf("%"))),e+="%"):(e=parseInt(i.substr(i.indexOf("%")-1,i.indexOf("%"))),e+="%");var s=i.substr(i.indexOf("#"),7);n.push([e,s])}),n},this._rgbToHex=function(t){function i(t){return t=parseInt(t,10),isNaN(t)?"00":(t=Math.max(0,Math.min(t,255)),"0123456789ABCDEF".charAt((t-t%16)/16)+"0123456789ABCDEF".charAt(t%16))}var n=t[0],e=t[1],s=t[2];return"#"+i(n)+i(e)+i(s)},this._sortByPosition=function(t,i){return parseInt(t[0])<parseInt(i[0])?-1:parseInt(t[0])>parseInt(i[0])?1:0},this._base64=function(t){for(var i,n,e,s,r,a,o,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",g=0;g<t.length;)i=t.charCodeAt(g++),n=t.charCodeAt(g++),e=t.charCodeAt(g++),s=i>>2,r=(3&i)<<4|n>>4,a=(15&n)<<2|e>>6,o=63&e,isNaN(n)?a=o=64:isNaN(e)&&(o=64),c+=d.charAt(s)+d.charAt(r)+d.charAt(a)+d.charAt(o);return c},this.__constructor()},t.fn.TS_VCSC_ClassyGradient=function(i){return this.each(function(){if(void 0===t(this).data("ClassyGradient")){var n=new t.TS_VCSC_ClassyGradient(this,i);t(this).data("ClassyGradient",n)}})}}(jQuery);