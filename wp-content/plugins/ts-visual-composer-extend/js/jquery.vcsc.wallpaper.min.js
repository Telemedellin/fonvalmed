!function(e,a){"use strict";function t(a){var t=e.extend({},R,a);w=e("body"),b=m(),$=b!==!1,$||(b="transitionend.wallpaper");for(var i=e(this),o=0,n=i.length;n>o;o++)r.apply(i.eq(o),[e.extend({},t)]);return w.hasClass("wallpaper-inititalized")||(w.addClass("wallpaper-inititalized"),T.on("resize.wallpaper",t,u)),i}function r(a){var t=e(this);if(!t.hasClass("wallpaper")){e.extend(a,t.data("wallpaper-options")),t.addClass("wallpaper").append('<div class="wallpaper-container"></div>'),a.guid="wallpaper-"+x++,a.youTubeGuid=0,a.$target=t,a.$container=a.$target.find(".wallpaper-container"),a.$target.data("wallpaper",a).on("resize.wallpaper",a,d);var r=a.source;a.source=null,i(r,a,!0),a.onReady.call()}}function i(e,t,r){if(e!==t.source){if(t.source=e,t.isYouTube=!1,"object"==typeof e&&"string"==typeof e.video){var i=e.video.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i);i&&i.length>=1&&(t.isYouTube=!0,t.videoId=i[1])}if(t.isYouTube)t.playing=!1,t.playerReady=!1,t.posterLoaded=!1,l(e,t,r);else if("object"!=typeof e||e.hasOwnProperty("fallback")){if(t.responsiveSource)for(var s in t.responsiveSource)t.responsiveSource.hasOwnProperty(s)&&t.responsiveSource[s].mq.removeListener(c);if(t.responsive=!1,t.responsiveSource=null,"object"==typeof e){var p,d=[];for(var u in e)if(e.hasOwnProperty(u)){var v="fallback"===u?"(min-width: 0px)":u;if(v){var f=a.matchMedia(v.replace(1/0,"100000px"));f.addListener(c),d.push({mq:f,source:e[u]}),f.matches&&(p=e[u])}}t.responsive=!0,t.responsiveSource=d,e=p}o(e,t,!1,r)}else n(e,t,r)}else t.$target.trigger("wallpaper.loaded"),t.onLoad.call(t.$target)}function o(a,t,r,i){var o=e('<div class="wallpaper-media wallpaper-image'+(i!==!0?" animated":"")+'"><img /></div>'),n=o.find("img"),l=a;n.one("load.wallpaper",function(){S&&o.addClass("native").css({backgroundImage:"url('"+l+"')"}),o.on(b,function(a){g(a),e(a.target).is(o)&&(o.off(b),r||s(t))}),setTimeout(function(){o.css({opacity:1}),t.responsive&&i&&s(t)},0),d({data:t}),(!r||i)&&(t.$target.trigger("wallpaper.loaded"),t.onLoad.call(t.$target)),C=e(".wallpaper-responsive")}).attr("src",l),t.responsive&&o.addClass("wallpaper-responsive"),t.$container.append(o),(n[0].complete||4===n[0].readyState)&&n.trigger("load.wallpaper")}function n(a,t,r){if(t.source.poster&&(o(t.source.poster,t,!0,!0),r=!1),!I){var i="";t.controls&&(i+='<div class="wallpaper-controls">',i+='<div class="wallpaper-play"><i class="ts-mediaplayer-play"></i></div>',i+='<div class="wallpaper-pause"><i class="ts-mediaplayer-pause"></i></div>',i+='<div class="wallpaper-mute"><i class="ts-mediaplayer-volume-mute2"></i></div>',i+='<div class="wallpaper-unmute"><i class="ts-mediaplayer-volume-high"></i></div>',i+='<div class="wallpaper-expand"><i class="ts-mediaplayer-expand"></i></div>',i+='<div class="wallpaper-contract"><i class="ts-mediaplayer-contract"></i></div>',i+="</div>"),i+='<div class="wallpaper-media wallpaper-video'+(r!==!0?" animated":"")+'">',i+="<video",t.controls&&(i+='  oncontextmenu="return false"'),t.loop&&(i+=" loop"),t.mute&&(i+=" muted"),t.source.poster&&(i+=' poster="'+t.source.poster+'"'),i+=">",t.source.webm&&(i+='<source src="'+t.source.webm+'" type="video/webm" />'),t.source.mp4&&(i+='<source src="'+t.source.mp4+'" type="video/mp4" />'),t.source.ogg&&(i+='<source src="'+t.source.ogg+'" type="video/ogg" />'),i+="</video>",i+="</div>",""!=t.overlay&&(i+='<div class="ts-background-overlay" style="background: '+t.overlay+';"></div>'),""!=t.raster&&(i+='<div class="ts-background-raster" style="background-image: url('+t.raster+');"></div>');var n=e(i),l=n.find("video");l.one("loadedmetadata.wallpaper",function(){n.on(b,function(a){g(a),e(a.target).is(n)&&(n.off(b),s(t))}),setTimeout(function(){n.css({opacity:1})},0),d({data:t}),t.$target.trigger("wallpaper.loaded"),t.onLoad.call(t.$target),l.bind("ended",function(){t.onFinish.call(t.$target)}),t.hoverPlay?t.$target.on("mouseover.boxer",W.play).on("mouseout.boxer",W.pause):t.autoPlay&&this.play()}),t.$container.append(n)}}function l(t,r,i){if(!r.videoId){var n=t.match(/^.*(?:youtu.be\/|v\/|e\/|u\/\w+\/|embed\/|v=)([^#\&\?]*).*/);r.videoId=n[1]}if(r.posterLoaded||(r.source.poster||(r.source.poster="http://img.youtube.com/vi/"+r.videoId+"/0.jpg"),r.posterLoaded=!0,o(r.source.poster,r,!0,i),i=!1),!I)if(e("script[src*='youtube.com/iframe_api']").length||e("head").append('<script src="//www.youtube.com/iframe_api"></script>'),k){var l=r.guid+"_"+r.youTubeGuid++,p="";p+='<div class="wallpaper-media wallpaper-embed'+(i!==!0?" animated":"")+'">',p+='<div id="'+l+'"></div>',p+="</div>";var u=e(p);r.$container.append(u),r.player&&(r.oldPlayer=r.player,r.player=null),r.player=new a.YT.Player(l,{videoId:r.videoId,playerVars:{controls:0,rel:0,showinfo:0,wmode:"transparent",enablejsapi:1,version:3,playerapiid:l,loop:r.loop?1:0,autoplay:1,origin:a.location.protocol+"//"+a.location.host},events:{onReady:function(){r.playerReady=!0,r.mute&&r.player.mute(),r.hoverPlay?r.$target.on("mouseover.boxer",W.play).on("mouseout.boxer",W.pause):r.autoPlay&&r.player.playVideo()},onStateChange:function(t){r.playing||t.data!==a.YT.PlayerState.PLAYING?r.loop&&r.playing&&t.data===a.YT.PlayerState.ENDED&&(r.player.playVideo(),r.onFinish.call(r.$target)):(r.playing=!0,(r.hoverPlay||!r.autoPlay)&&r.player.pauseVideo(),r.$target.trigger("wallpaper.loaded"),r.onLoad.call(r.$target),u.on(b,function(a){g(a),e(a.target).is(u)&&(u.off(b),s(r))}),u.css({opacity:1})),r.$target.find(".wallpaper-embed").addClass("ready")},onPlaybackQualityChange:function(){},onPlaybackRateChange:function(){},onError:function(){},onApiChange:function(){}}}),d({data:r})}else L.push({source:t,data:r})}function s(a){var t=a.$container.find(".wallpaper-media");t.length>=1&&(t.not(":last").remove(),a.oldPlayer=null),C=e(".wallpaper-responsive")}function p(a){var t=a.$container.find(".wallpaper-media");t.length>=1&&t.on(b,function(r){g(r),e(r.target).is(t)&&(e(this).remove(),delete a.source)}).css({opacity:0})}function d(e){g(e);for(var a=e.data,t=a.$container.find(".wallpaper-media"),r=0,i=t.length;i>r;r++){var o=t.eq(r),n=a.isYouTube?"iframe":o.find("video").length?"video":"img",l=o.find(n);if(l.length&&("img"!==n||!a.nativeSupport)){var s=a.$target.outerWidth(),p=a.$target.outerHeight(),d=y(a,l);a.width=d.naturalWidth,a.height=d.naturalHeight,a.left=0,a.top=0;var u=a.isYouTube?a.embedRatio:a.width/a.height;a.height=p,a.width=a.height*u,a.width<s&&(a.width=s,a.height=a.width/u),a.left=-(a.width-s)/2,a.top=-(a.height-p)/2,o.css({height:a.height,width:a.width,left:a.left,top:a.top})}}}function u(){e(".wallpaper").each(function(){var a=e(this).data("wallpaper");d({data:a})})}function c(){P=f(P,5,v)}function v(){h(P),C.each(function(){for(var a=e(this),t=(a.find("img"),a.parents(".wallpaper").data("wallpaper")),r=t.responsiveSource,i=0,n=0,l=r.length;l>n;n++)if(r.hasOwnProperty(n)){var s=r[n].mq;s&&s.matches&&(i=n)}o(r[i].source,t,!1,!0),a.trigger("change.wallpaper")})}function f(e,a,t,r){return h(e,r),setTimeout(t,a)}function h(e){null!==e&&(clearInterval(e),e=null)}function y(e,a){if(e.isYouTube)return{naturalHeight:500,naturalWidth:500/e.embedRatio};if(a.is("img")){var t=a[0];if("undefined"!=typeof t.naturalHeight)return{naturalHeight:t.naturalHeight,naturalWidth:t.naturalWidth};var r=new Image;return r.src=t.src,{naturalHeight:r.height,naturalWidth:r.width}}return{naturalHeight:a[0].videoHeight,naturalWidth:a[0].videoWidth}}function g(e){e.preventDefault&&(e.stopPropagation(),e.preventDefault())}function m(){var e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},a=document.createElement("div");for(var t in e)if(e.hasOwnProperty(t)&&t in a.style)return e[t]+".wallpaper";return!1}var w,b,$,P,T=e(a),C=null,S="backgroundSize"in document.documentElement.style,x=0,k=!1,L=[],Y=a.navigator.userAgent||a.navigator.vendor||a.opera,I=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(Y),R=(Y.toLowerCase().indexOf("safari")>=0&&Y.toLowerCase().indexOf("chrome")<0,{controls:!1,autoPlay:!0,embedRatio:1.777777,hoverPlay:!1,loop:!0,mute:!0,onLoad:e.noop,onReady:e.noop,onFinish:e.noop,raster:"",overlay:"",source:null}),W={defaults:function(a){return R=e.extend(R,a||{}),"object"==typeof this?e(this):!0},destroy:function(){var a=e(this).each(function(){var a=e(this).data("wallpaper");a&&(a.$container.remove(),a.$target.removeClass("wallpaper").off(".boxer").data("wallpaper",null))});return"undefined"!=typeof w&&"undefined"!=typeof T&&e(".wallpaper").length<1&&(w.removeClass("wallpaper-inititalized"),T.off(".wallpaper")),a},load:function(a){return e(this).each(function(){var t=e(this).data("wallpaper");t&&i(a,t)})},pause:function(){return e(this).each(function(){var a=e(this).data("wallpaper");if(a)if(a.isYouTube&&a.playerReady)a.player.pauseVideo();else{var t=a.$container.find("video");t.length&&t[0].pause()}})},play:function(){return e(this).each(function(){var a=e(this).data("wallpaper");if(a)if(a.isYouTube&&a.playerReady)a.player.playVideo();else{var t=a.$container.find("video");t.length&&t[0].play()}})},stop:function(){W.pause.apply(this)},unload:function(){return e(this).each(function(){var a=e(this).data("wallpaper");a&&p(a)})}};a.onYouTubeIframeAPIReady=function(){k=!0;for(var e in L)L.hasOwnProperty(e)&&l(L[e].source,L[e].data);L=[]},e.fn.TS_VCSC_Wallpaper=function(e){return W[e]?W[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?this:t.apply(this,arguments)},e.TS_VCSC_Wallpaper=function(e){"defaults"===e&&W.defaults.apply(this,Array.prototype.slice.call(arguments,1))}}(jQuery,window);