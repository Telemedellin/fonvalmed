!function(e){var t=function(t){var o=e.TSToggles=function(e,o){var i=this;if("boolean"==typeof o&&e.data("toggles"))return void e.data("toggles").toggle(o);for(var l=["on","drag","click","width","height","animate","easing","type","input","checkbox","generator"],n={},s=0;s<l.length;s++){var a=e.data("toggle-"+l[s]);"undefined"!=typeof a&&(n[l[s]]=a)}o=i.opts=t.extend({drag:!0,click:!0,text:{on:"ON",off:"OFF"},on:!1,animate:250,easing:"swing",input:null,checkbox:null,clicker:null,width:50,height:20,type:"compact",event:"toggle",generator:!1},o||{},n),i.el=e,i.active=o.on,e.data("toggles",i),i.selectType="select"===o.type,i.checkbox=t(o.checkbox),i.input=t(o.input),o.clicker&&(i.clicker=t(o.clicker)),i.createEl(),i.bindEvents()};o.prototype.createEl=function(){var e=this,o=e.el.height(),i=e.el.width();o||e.el.height(o=e.opts.height),i||e.el.width(i=e.opts.width),e.h=o,e.w=i;var l=function(e){return t('<div class="toggle-'+e+'">')};e.els={slide:l("slide"),inner:l("inner"),on:l("on"),off:l("off"),blob:l("blob")};var n=o/2,s=i-n,a=e.selectType;e.els.on.css({height:o,width:s,textIndent:a?"":-n,lineHeight:o+"px"}).html(e.opts.text.on),1==e.active&&e.els.on.addClass("active"),e.els.off.css({height:o,width:s,marginLeft:a?"":-n,textIndent:a?"":n,lineHeight:o+"px"}).html(e.opts.text.off),0==e.active&&e.els.off.addClass("active"),e.opts.generator&&e.el.attr("data-active",e.active),e.els.blob.css({height:o,width:o,marginLeft:-n}),e.els.inner.css({width:2*i-o,marginLeft:a||e.active?0:-i+o}),e.selectType&&(e.els.slide.addClass("toggle-select"),e.el.css("width",2*s),e.els.blob.hide()),e.els.inner.append(e.els.on,e.els.blob,e.els.off),e.els.slide.html(e.els.inner),e.el.html(e.els.slide)},o.prototype.bindEvents=function(){var e=this,t=function(t){t.target===e.els.blob[0]&&e.opts.drag||e.toggle()};!e.opts.click||e.opts.clicker&&e.opts.clicker.has(e.el).length||e.el.on("click",t),e.opts.clicker&&e.opts.clicker.on("click",t),e.opts.drag&&!e.selectType&&e.bindDrag()},o.prototype.bindDrag=function(){var e,t=this,o=(t.w-t.h)/4,i=function(i){if(t.el.off("mousemove"),t.els.slide.off("mouseleave"),t.els.blob.off("mouseup"),!e&&t.opts.click&&"mouseleave"!==i.type)return void t.toggle();var l=t.active?-o>e:e>o;l?t.toggle():t.els.inner.stop().animate({marginLeft:t.active?0:-t.w+t.h},t.opts.animate/2)},l=-t.w+t.h;t.els.blob.on("mousedown",function(o){e=0,t.els.blob.off("mouseup"),t.els.slide.off("mouseleave");var n=o.pageX;t.el.on("mousemove",t.els.blob,function(o){e=o.pageX-n;var i;t.active?(i=e,e>0&&(i=0),l>e&&(i=l)):(i=e+l,0>e&&(i=l),e>-l&&(i=0)),t.els.inner.css("margin-left",i)}),t.els.blob.on("mouseup",i),t.els.slide.on("mouseleave",i)})},o.prototype.toggle=function(e){var t=this;if(t.active!==e){var o=t.active=!t.active;if(t.opts.generator&&t.el.attr("data-active",o),t.el.data("toggle-active",o),t.els.off.toggleClass("active",!o),t.els.on.toggleClass("active",o),t.checkbox.prop("checked",o).attr("checked",o),t.checkbox.trigger("change"),t.input.val(o),t.input.trigger("change"),t.el.trigger(t.opts.event,o),!t.selectType){var i=o?0:-t.w+t.h;t.els.inner.stop().animate({marginLeft:i},t.opts.animate)}}},t.fn.TSToggleSwitch=function(e){return this.each(function(){new o(t(this),e)})}};"function"==typeof define&&define.amd?define(["jquery"],t):t(e.jQuery||e.Zepto||e.ender||e.$||$)}(this);