!function(e){e(document).ready(function(){}),jQuery(window).load(function(){jQuery(".ts-timeline-css-container").each(function(){function t(){var e=(d.find(".ts-timeline-css-section").length,0);d.find(".ts-timeline-css-section").each(function(){"false"==jQuery(this).attr("data-filtered-categories")&&"false"==jQuery(this).attr("data-filtered-tags")?(e++,jQuery(this).removeClass("ts-timeline-css-filtered").addClass("ts-timeline-css-visible")):jQuery(this).removeClass("ts-timeline-css-visible").addClass("ts-timeline-css-filtered")}),0==e&&(k&&(H[0].sumo.selectAll(),H.trigger("change")),S&&(F[0].sumo.selectAll(),F.trigger("change"))),n()}function s(){var e=o.find(".ts-timeline-css-section.ts-timeline-css-visible").length+x;m>=e?o.find(".ts-timeline-css-section:lt("+e+")").addClass("ts-timeline-css-visible").removeClass("ts-timeline-css-hidden").fadeIn():(u.fadeIn().addClass("ts-timeline-css-visible").removeClass("ts-timeline-css-hidden"),"desc"==y&&j.fadeIn(),M.hide()),setTimeout(function(){n()},750)}function i(){l.width("100%"),u.each(l.outerWidth()<=h?function(){jQuery(this).hasClass("ts-timeline-css-fullwidth")&&(jQuery(this).find(".ts-timeline-css-fullwidth-colA").addClass("no-columns"),jQuery(this).find(".ts-timeline-css-fullwidth-colB").addClass("no-columns"))}:function(){jQuery(this).hasClass("ts-timeline-css-fullwidth")&&(jQuery(this).find(".ts-timeline-css-fullwidth-colA").removeClass("no-columns"),jQuery(this).find(".ts-timeline-css-fullwidth-colB").removeClass("no-columns"))}),setTimeout(function(){w.each(function(){if(jQuery(this).hasClass("ts-timeline-css-icon-half")){if(jQuery(this).next().hasClass("ts-timeline-css-text-wrap-inner")){var e=(parseInt(jQuery(this).next().outerHeight(!0))-parseInt(jQuery(this).outerHeight(!0)))/2;jQuery(this).animate({top:e+"px"},500)}}else if(jQuery(this).prev().hasClass("ts-timeline-css-text-wrap-inner")){var e=(parseInt(jQuery(this).prev().outerHeight(!0))-parseInt(jQuery(this).outerHeight(!0)))/2;jQuery(this).animate({top:e+"px"},500)}})},250)}function a(){d.find(".ts-timeline-css-section.ts-timeline-css-visible").each(function(e,t){jQuery(t).addClass("ts-timeline-css-order-"+y).attr("data-item",e).attr("data-order",y),jQuery(t).attr("data-height",jQuery(t).height())})}function n(){if("ts-timeline-css-columns"==f){var e=0,t=0,s=0,i=0,a=0,n=32;d.find(".ts-timeline-css-section.ts-timeline-css-visible").each(function(i,a){jQuery(a).attr("data-height",jQuery(a).height()),jQuery(a).hasClass("ts-timeline-css-event")?(s=jQuery(a).height(),t>e?(jQuery(a).alterClass("ts-timeline-css-event-*","ts-timeline-css-event-right"),e+=s):(jQuery(a).alterClass("ts-timeline-css-event-*","ts-timeline-css-event-left"),t+=s)):(e=0,t=0)}),d.find(".ts-timeline-css-section.ts-timeline-css-visible").each(function(e,t){i=jQuery(t).offset(),jQuery(t).hasClass("ts-timeline-css-event")&&(jQuery(t).attr("data-offset",i.top),a+n>i.top&&jQuery(t).hasClass("ts-timeline-css-event-right")?jQuery(t).addClass("ts-timeline-css-event-right-offset"):jQuery(t).removeClass("ts-timeline-css-event-right-offset"),a=i.top)})}}function r(e,t,s){return jQuery(jQuery(e).toArray().sort(function(e,i){var a=parseInt(e.getAttribute(t)),n=parseInt(i.getAttribute(t));return"asc"==s?a-n:n-a}))}{var l=jQuery(this),c=l.attr("data-type"),d=l.find(".ts-timeline-css-wrapper"),o=d.find(".ts-timeline-css-content"),u=o.find(".ts-timeline-css-section"),m=u.length,h=parseInt(l.attr("data-break")),f=l.attr("data-layout"),v=l.attr("data-switch"),y=l.attr("data-order"),g=l.width(),j=l.find(".ts-timeline-css-footer-wrap"),p=l.find(".ts-timeline-css-header-wrap"),Q=l.find(".ts-timeline-css-begin-top"),C=l.find(".ts-timeline-css-begin-bottom"),w=u.find(".ts-timeline-css-icon"),b="true"==l.attr("data-lazy")?!0:!1,I="true"==l.attr("data-sorter")?!0:!1,A="true"==l.attr("data-filter-allow")?!0:!1,k="true"==l.attr("data-filter-categories")?!0:!1,S="true"==l.attr("data-filter-tags")?!0:!1,x=parseInt(l.attr("data-count")),M=l.find(".ts-timeline-css-showmore"),P=l.find(".ts-timeline-css-title-wrapper"),B=l.attr("data-trigger");l.find(".ts-timeline-css-slickslider-container").length}if("posts"==c&&("asc"==y?jQuery.each(r(u,"data-start","asc"),function(e,t){o.append(t)}):"desc"==y&&jQuery.each(r(u,"data-end","desc"),function(e,t){o.append(t)})),A){var D=l.attr("data-filter-selected"),O=l.attr("data-filter-selectall");if(k)var T=l.attr("data-filter-nocats"),W=l.find(".ts-timeline-css-filters-cats"),H=W.find("select"),V=W.attr("data-target"),E=[];if(S)var $=l.attr("data-filter-notags"),_=l.find(".ts-timeline-css-filters-tags"),F=_.find("select"),R=W.attr("data-target"),z=[];d.find(".ts-timeline-css-section").each(function(){if(k){var e=jQuery(this).attr("data-categories");""!=e?jQuery.each(e.split(","),function(e,t){-1==jQuery.inArray(jQuery.trim(t),E)&&E.push(jQuery.trim(t))}):(jQuery(this).attr("data-categories",T),-1==jQuery.inArray(jQuery.trim(T),E)&&E.push(jQuery.trim(T)))}if(S){var t=jQuery(this).attr("data-tags");""!=t?jQuery.each(t.split(","),function(e,t){-1==jQuery.inArray(jQuery.trim(t),z)&&z.push(jQuery.trim(t))}):(jQuery(this).attr("data-tags",$),-1==jQuery.inArray(jQuery.trim($),z)&&z.push(jQuery.trim($)))}}),k&&(E.length>0&&(E.sort(),jQuery.each(E,function(t,s){H.append(e("<option></option>").attr("value",s).attr("selected","selected").attr("data-type","categories").text(s))})),H.SumoSelect({csvDispCount:1,captionFormat:"{0} "+D,floatWidth:400,forceCustomRendering:!0,nativeOnDevice:["Android","BlackBerry","iPhone","iPad","iPod","Opera Mini","IEMobile","Silk"],outputAsCSV:!1,csvSepChar:",",okCancelInMulti:!1,triggerChangeCombined:!0,selectAll:!0,selectAlltext:O}),W.show(),H.on("change",function(){var e=H.val();null==e?(H[0].sumo.selectAll(),H.trigger("change")):(jQuery.isArray(e)||(e=e.split(",")),jQuery("#"+V).find(".ts-timeline-css-section").each(function(){for(var t=jQuery(this).attr("data-categories").split(","),s=e.concat(t),i=s.sort(),a=[],n=0;n<s.length-1;n++)i[n+1]==i[n]&&a.push(i[n]);a.length>0?jQuery(this).attr("data-filtered-categories","false"):jQuery(this).attr("data-filtered-categories","true")}),t())})),S&&(z.length>0&&(z.sort(),jQuery.each(z,function(t,s){F.append(e("<option></option>").attr("value",s).attr("selected","selected").attr("data-type","tags").text(s))})),F.SumoSelect({csvDispCount:1,captionFormat:"{0} "+D,floatWidth:400,forceCustomRendering:!0,nativeOnDevice:["Android","BlackBerry","iPhone","iPad","iPod","Opera Mini","IEMobile","Silk"],outputAsCSV:!1,csvSepChar:",",okCancelInMulti:!1,triggerChangeCombined:!0,selectAll:!0,selectAlltext:O}),_.show(),F.on("change",function(){var e=F.val();null==e?(F[0].sumo.selectAll(),F.trigger("change")):(jQuery.isArray(e)||(e=e.split(",")),jQuery("#"+R).find(".ts-timeline-css-section").each(function(){for(var t=jQuery(this).attr("data-tags").split(","),s=e.concat(t),i=s.sort(),a=[],n=0;n<s.length-1;n++)i[n+1]==i[n]&&a.push(i[n]);a.length>0?jQuery(this).attr("data-filtered-tags","false"):jQuery(this).attr("data-filtered-tags","true")}),t())}))}if(g>h&&"ts-timeline-css-columns"==f?d.find(".ts-timeline-css-event.ts-timeline-css-visible").each(function(e,t){var s=e%2==0?"ts-timeline-css-event-left":"ts-timeline-css-event-right";jQuery(t).addClass(s)}):h>g&&"ts-timeline-css-columns"==f&&(d.alterClass("ts-timeline-css-*",v),u.each(function(){jQuery(this).hasClass("ts-timeline-css-break")&&jQuery(this).css("width","98%")})),"asc"==y?(p.fadeIn(),C.fadeIn()):Q.fadeIn(),x>m&&(b=!1),b?(u.removeClass("ts-timeline-css-visible").hide(),o.find(".ts-timeline-css-section:lt("+x+")").addClass("ts-timeline-css-visible").removeClass("ts-timeline-css-hidden").fadeIn(),1==TS_VCSC_MobileDevice&&(B="click"),M.on("click",s)):(u.fadeIn().addClass("ts-timeline-css-visible").removeClass("ts-timeline-css-hidden"),"desc"==y&&j.fadeIn(),M.hide()),b&&"scroll"==B&&M.bind("inview",function(e,t,i,a){if(t){var n=jQuery(this);"top"==a||"bottom"==a||(n.addClass("ts-timeline-css-showmore-visible"),setTimeout(function(){s()},500))}else n.removeClass("ts-timeline-css-showmore-visible")}),I){var q=l.find(".ts-timeline-css-sorter"),G=q.find("select"),J=q.attr("data-target");G.SumoSelect({csvDispCount:1,captionFormat:"{0} "+D,floatWidth:400,forceCustomRendering:!0,nativeOnDevice:["Android","BlackBerry","iPhone","iPad","iPod","Opera Mini","IEMobile","Silk"],outputAsCSV:!1,csvSepChar:",",okCancelInMulti:!1,triggerChangeCombined:!0,selectAll:!1}),q.show(),G.on("change",function(){var e=G.val();null==e?(G[0].sumo.selectItem(1),G.trigger("change")):jQuery("#"+J).find(".ts-timeline-css-section").each(function(){"asc"==e?(C.fadeIn(),p.fadeIn(),Q.hide(),j.hide(),$direction="asc",l.attr("data-order",$direction),l.alterClass("ts-timeline-css-container-*","ts-timeline-css-container-asc"),u.alterClass("ts-timeline-css-order-*","ts-timeline-css-order-asc").attr("data-order","asc"),"timeline"==c?jQuery.each(r(u,"data-item","asc"),function(e,t){o.append(t)}):"posts"==c&&jQuery.each(r(u,"data-start","asc"),function(e,t){o.append(t)})):"desc"==e&&(C.hide(),p.hide(),Q.fadeIn(),j.fadeIn(),$direction="desc",l.attr("data-order",$direction),l.alterClass("ts-timeline-css-container-*","ts-timeline-css-container-desc"),u.alterClass("ts-timeline-css-order-*","ts-timeline-css-order-desc").attr("data-order","desc"),"timeline"==c?jQuery.each(r(u,"data-item","desc"),function(e,t){o.append(t)}):"posts"==c&&jQuery.each(r(u,"data-end","desc"),function(e,t){o.append(t)})),n()})})}n(),a(),i(),jQuery(this).find(".ts-timeline-css-imageslider-container").each(function(){var e=jQuery(this),t=(e.attr("data-parents"),parseInt(e.attr("data-items"))),s=e.find(".ts-timeline-css-imageslider-slides"),i=e.find(".ts-timeline-css-imageslider-item"),a=e.find(".ts-timeline-css-imageslider-dot"),r=e.find(".ts-timeline-css-imageslider-next"),l=e.find(".ts-timeline-css-imageslider-prev"),c=0,d=c+1,o=t,u=!1;if(r.on("click",function(){u=!0,d=c+1>t-1?0:c+1,i.removeClass("ts-timeline-css-slider-view-active").addClass("ts-timeline-css-slider-view-hidden").css("display","none"),a.removeClass("ts-timeline-css-imageslider-dotactive"),e.find(".ts-timeline-css-imageslider-item[data-order='"+d+"']").show().alterClass("ts-timeline-css-slider-view-*","ts-timeline-css-slider-view-active"),e.find(".ts-timeline-css-imageslider-dot[data-order='"+d+"']").addClass("ts-timeline-css-imageslider-dotactive"),c=d,n(),u=!1}),l.on("click",function(){u=!0,o=0>c-1?t-1:c-1,i.removeClass("ts-timeline-css-slider-view-active").addClass("ts-timeline-css-slider-view-hidden").css("display","none"),a.removeClass("ts-timeline-css-imageslider-dotactive"),e.find(".ts-timeline-css-imageslider-item[data-order='"+o+"']").show().alterClass("ts-timeline-css-slider-view-*","ts-timeline-css-slider-view-active"),e.find(".ts-timeline-css-imageslider-dot[data-order='"+o+"']").addClass("ts-timeline-css-imageslider-dotactive"),c=o,n(),u=!1}),a.on("click",function(){c=parseInt(jQuery(this).attr("data-order")),a.removeClass("ts-timeline-css-imageslider-dotactive"),i.removeClass("ts-timeline-css-slider-view-active").addClass("ts-timeline-css-slider-view-hidden").css("display","none"),e.find(".ts-timeline-css-imageslider-item[data-order='"+c+"']").show().alterClass("ts-timeline-css-slider-view-*","ts-timeline-css-slider-view-active"),jQuery(this).addClass("ts-timeline-css-imageslider-dotactive"),n()}),"ontouchstart"in document.documentElement||1==TS_VCSC_MobileDevice){var m=new Hammer(s,"");m.on("swipeleft",function(){return u||r.trigger("click"),!1}),m.on("swiperight",function(){return u||l.trigger("click"),!1})}}),jQuery(window).on("debouncedresize",function(){f=l.attr("data-layout"),g=l.width(),g-P.find(".ts-timeline-css-title-after").outerWidth()<P.find(".ts-timeline-css-title-string").outerWidth()?P.find(".ts-timeline-css-title-after").hide():P.find(".ts-timeline-css-title-after").show(),h>g&&"ts-timeline-css-columns"==f?(d.alterClass("ts-timeline-css-*",v),u.each(function(){jQuery(this).hasClass("ts-timeline-css-break")&&jQuery(this).css("width","98%")})):g>h&&"ts-timeline-css-columns"==f&&(d.alterClass("ts-timeline-css-*","ts-timeline-css-columns"),u.each(function(){jQuery(this).hasClass("ts-timeline-css-break")&&"false"==jQuery(this).attr("data-fullwidth")&&jQuery(this).css("width","50%")})),d.addClass("ts-timeline-css-wrapper"),i(),"ts-timeline-css-columns"==f&&setTimeout(function(){n()},750)})})})}(jQuery);