!function(e){e(document).ready(function(){if(void 0!==window.VcRowView){{vc.shortcodes}window.TS_VCSC_VcRowViewCustom=window.VcRowView.extend({buildDesignHelpers:function(){var r=this.model.get("params"),t=this.model.getParam("css"),a=r.ts_row_bg_effects,n=this.$el.find("> .controls .column_toggle"),o=this.$el.find("> .controls .column_edit");if(""!=n.length)var i=n;else var i=o;var d,g,s=t.match(/background\-image:\s*url\(([^\)]+)\)/);s&&!_.isUndefined(s[1])&&(d=s[1]);var s=t.match(/background\-color:\s*([^\s\;]+)\b/);s&&!_.isUndefined(s[1])&&(g=s[1]);var s=t.match(/background:\s*([^\s]+)\b\s*url\(([^\)]+)\)/);if(s&&!_.isUndefined(s[1])&&(g=s[1],d=s[2]),this.$el.find("> .controls .vc_row_color").remove(),this.$el.find("> .controls .vc_row_image").remove(),this.$el.find("> .controls .ts-vcsc-background-color").remove(),this.$el.find("> .controls .ts-vcsc-background-image").remove(),this.$el.find("> .controls .ts-vcsc-background-gradient").remove(),g?e('<span class="vc_row_color" style="background-color: '+g+'" title="'+i18nLocale.row_background_color+'"></span>').insertAfter(i):_.isEmpty(r.bg_color)||e('<span class="vc_row_color" style="background-color: '+r.bg_color+'" title="'+i18nLocale.row_background_color+'"></span>').insertAfter(i),"single"==a&&(_.isEmpty(r.single_color)||e('<span class="ts-vcsc-background-color" style="background-color: '+r.single_color+'" title="'+i18nLocale.row_background_color+'"></span>').insertAfter(i)),"gradient"==a){var c="";void 0!=r.gradiant_advanced?"true"!=r.gradiant_advanced||_.isEmpty(r.gradient_generator)?"false"!=r.gradient_advanced||_.isEmpty(r.gradient_color_start)||_.isEmpty(r.gradient_color_end)||(c+="background: "+r.gradient_color_start+";",c+="background: -moz-linear-gradient("+parseInt(r.gradient_angle)+"deg, "+r.gradient_color_start+" "+r.gradient_start_offset+"%, "+r.gradient_color_end+" "+r.gradient_end_offset+"%);",c+="background: -webkit-linear-gradient("+parseInt(r.gradient_angle)+"deg, "+r.gradient_color_start+" "+r.gradient_start_offset+"%, "+r.gradient_color_end+" "+r.gradient_end_offset+"%);",c+="background: -o-linear-gradient("+parseInt(r.gradient_angle)+"deg, "+r.gradient_color_start+" "+r.gradient_start_offset+"%, "+r.gradient_color_end+" "+r.gradient_end_offset+"%);",c+="background: -ms-linear-gradient("+parseInt(r.gradient_angle)+"deg, "+r.gradient_color_start+" "+r.gradient_start_offset+"%, "+r.gradient_color_end+" "+r.gradient_end_offset+"%);",c+="background: linear-gradient("+parseInt(r.gradient_angle)+"deg, "+r.gradient_color_start+" "+r.gradient_start_offset+"%, "+r.gradient_color_end+" "+r.gradient_end_offset+"%);"):c+=r.gradient_generator:_.isEmpty(r.gradient_color_start)||_.isEmpty(r.gradient_color_end)||(c+="background: "+r.gradient_color_start+";",c+="background: -moz-linear-gradient("+parseInt(r.gradient_angle)+"deg, "+r.gradient_color_start+" "+r.gradient_start_offset+"%, "+r.gradient_color_end+" "+r.gradient_end_offset+"%);",c+="background: -webkit-linear-gradient("+parseInt(r.gradient_angle)+"deg, "+r.gradient_color_start+" "+r.gradient_start_offset+"%, "+r.gradient_color_end+" "+r.gradient_end_offset+"%);",c+="background: -o-linear-gradient("+parseInt(r.gradient_angle)+"deg, "+r.gradient_color_start+" "+r.gradient_start_offset+"%, "+r.gradient_color_end+" "+r.gradient_end_offset+"%);",c+="background: -ms-linear-gradient("+parseInt(r.gradient_angle)+"deg, "+r.gradient_color_start+" "+r.gradient_start_offset+"%, "+r.gradient_color_end+" "+r.gradient_end_offset+"%);",c+="background: linear-gradient("+parseInt(r.gradient_angle)+"deg, "+r.gradient_color_start+" "+r.gradient_start_offset+"%, "+r.gradient_color_end+" "+r.gradient_end_offset+"%);"),e('<span class="ts-vcsc-background-gradient" style="'+c+'" title="'+i18nLocale.row_background_color+'"></span>').insertAfter(i)}d?e('<span class="vc_row_image" style="background-image: url('+d+');" title="'+i18nLocale.row_background_image+'"></span>').insertAfter(i):_.isEmpty(r.bg_image)||(d=e('<span class="vc_row_image" style="background-image: url('+e(".vc_loading_block > img").attr("src")+');" title="'+i18nLocale.row_background_image+'"></span>'),d.insertAfter(i),e.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_single_image_src",content:r.bg_image,size:"thumbnail",_vcnonce:window.vcAdminNonce},dataType:"html",context:this}).done(function(e){d.css({backgroundImage:"url("+e+")"})})),("image"==a||"fixed"==a||"parallax"==a||"automove"==a||"movement"==a)&&(_.isEmpty(r.ts_row_bg_image)||(d=e('<span class="ts-vcsc-background-image" style="background-image: url('+e(".vc_loading_block > img").attr("src")+');"title="'+i18nLocale.row_background_image+'"></span>'),d.insertAfter(i),e.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_single_image_src",content:r.ts_row_bg_image,size:"thumbnail",_vcnonce:window.vcAdminNonce},dataType:"html",context:this}).done(function(e){d.css({backgroundImage:"url("+e+")"})})))}})}})}(jQuery);