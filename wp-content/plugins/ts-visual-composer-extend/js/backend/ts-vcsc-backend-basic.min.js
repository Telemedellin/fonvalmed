function TS_VCSC_NL2BR(t,e){var a=e||"undefined"==typeof e?"<br/>":"<br>";return(t+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+a+"$2")}function TS_VCSC_GetStringBetween(t,e,a){var o=t.match(e+"(.*?)"+a);return null!=o?o[1]:""}var TS_VCSC_Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e="";if(""==t||void 0==t)return e;var a,o,n,i,r,s,d,_=0;for(t=TS_VCSC_Base64._utf8_encode(t);_<t.length;)a=t.charCodeAt(_++),o=t.charCodeAt(_++),n=t.charCodeAt(_++),i=a>>2,r=(3&a)<<4|o>>4,s=(15&o)<<2|n>>6,d=63&n,isNaN(o)?s=d=64:isNaN(n)&&(d=64),e=e+this._keyStr.charAt(i)+this._keyStr.charAt(r)+this._keyStr.charAt(s)+this._keyStr.charAt(d);return e},decode:function(t){var e="";if(""==t||void 0==t)return e;var a,o,n,i,r,s,d,_=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");_<t.length;)i=this._keyStr.indexOf(t.charAt(_++)),r=this._keyStr.indexOf(t.charAt(_++)),s=this._keyStr.indexOf(t.charAt(_++)),d=this._keyStr.indexOf(t.charAt(_++)),a=i<<2|r>>4,o=(15&r)<<4|s>>2,n=(3&s)<<6|d,e+=String.fromCharCode(a),64!=s&&(e+=String.fromCharCode(o)),64!=d&&(e+=String.fromCharCode(n));return e=TS_VCSC_Base64._utf8_decode(e)},_utf8_encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",a=0;a<t.length;a++){var o=t.charCodeAt(a);128>o?e+=String.fromCharCode(o):o>127&&2048>o?(e+=String.fromCharCode(o>>6|192),e+=String.fromCharCode(63&o|128)):(e+=String.fromCharCode(o>>12|224),e+=String.fromCharCode(o>>6&63|128),e+=String.fromCharCode(63&o|128))}return e},_utf8_decode:function(t){for(var e="",a=0,o=c1=c2=0;a<t.length;)o=t.charCodeAt(a),128>o?(e+=String.fromCharCode(o),a++):o>191&&224>o?(c2=t.charCodeAt(a+1),e+=String.fromCharCode((31&o)<<6|63&c2),a+=2):(c2=t.charCodeAt(a+1),c3=t.charCodeAt(a+2),e+=String.fromCharCode((15&o)<<12|(63&c2)<<6|63&c3),a+=3);return e}};!function(t){t(document).ready(function(){window.i18nLocale;if(void 0!==window.VcColumnView){var e=vc.shortcodes;window.TS_VCSC_HotspotContainerViewCustom=window.VcColumnView.extend({addElement:function(t){_.isObject(t)&&t.preventDefault();var e=this.$el.attr("data-hotspot-image"),a=this.$el.attr("data-hotspot-link");$TS_VCSC_Hotspot_Image_ID=e,$TS_VCSC_Hotspot_Image_Link=a,window.TS_VCSC_HotspotContainerViewCustom.__super__.addElement.call(this,t)},buildDesignHelpers:function(){{var a=this.model.get("params"),o=(this.model.getParam("css"),a.hotspot_image,this.$el.find("> .vc_controls .column_add").get(0),this.$el),n=o.attr("data-model-id");e.where({parent_id:this.model.id})}_.isEmpty(a.hotspot_image)||(o.find("> .vc_controls .column_add").hide(),o.find(".wpb_element_wrapper").append('<div class="ts-backend-editor-loader"></div>'),o.find("> .wpb_element_wrapper .wpb_column_container .wpb_TS_VCSC_Image_Hotspot_Single").attr("data-hotspot-image",a.hotspot_image),o.find("> .wpb_element_wrapper .wpb_column_container .wpb_TS_VCSC_Image_Hotspot_Single").attr("data-hotspot-parent",n),o.find("> .wpb_element_wrapper .wpb_column_container").attr("data-hotspot-image",a.hotspot_image),o.attr("data-hotspot-image",a.hotspot_image),t.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_single_image_src",content:a.hotspot_image,size:"large",_vcnonce:window.vcAdminNonce},dataType:"html",context:this}).done(function(t){o.find(".wpb_element_wrapper").find(".ts-backend-editor-loader").remove(),o.find("> .vc_controls .column_add").show(),o.find("> .wpb_element_wrapper .wpb_column_container .wpb_TS_VCSC_Image_Hotspot_Single").attr("data-hotspot-link",t),o.find("> .wpb_element_wrapper .wpb_column_container .wpb_TS_VCSC_Image_Hotspot_Single").attr("data-hotspot-image",a.hotspot_image),o.find("> .wpb_element_wrapper .wpb_column_container .wpb_TS_VCSC_Image_Hotspot_Single").attr("data-hotspot-parent",n),o.find("> .wpb_element_wrapper .wpb_column_container").attr("data-hotspot-link",t),o.find("> .wpb_element_wrapper .wpb_column_container").attr("data-hotspot-image",a.hotspot_image),o.attr("data-hotspot-link",t)}).fail(function(){o.find(".wpb_element_wrapper").find(".ts-backend-editor-loader").remove(),o.find("> .vc_controls .column_add").show()}))}}),window.TS_VCSC_HotspotSingleViewCustom=vc.shortcode_view.extend({editElement:function(e){_.isObject(e)&&e.preventDefault();var a=(this.model.get("params"),this.$el),o=a.parent().attr("data-hotspot-image");if(void 0==a.attr("data-hotspot-current")||0==a.attr("data-hotspot-current").length)var n=o;else var n=a.attr("data-hotspot-current");a.attr("data-hotspot-image",o);if(void 0==a.parent().attr("data-hotspot-link")||0==a.parent().attr("data-hotspot-link").length||n!=o)t.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_single_image_src",content:o,size:"medium",_vcnonce:window.vcAdminNonce},dataType:"html",context:this}).done(function(t){$TS_VCSC_Hotspot_Image_ID=o,$TS_VCSC_Hotspot_Image_Link=t,a.attr("data-hotspot-link",t),a.attr("data-hotspot-current",o)}).fail(function(){var t=a.parent().attr("data-hotspot-link");$TS_VCSC_Hotspot_Image_Link=t,$TS_VCSC_Hotspot_Image_ID=a.parent().attr("data-hotspot-image")});else{var i=a.parent().attr("data-hotspot-link");$TS_VCSC_Hotspot_Image_Link=i,$TS_VCSC_Hotspot_Image_ID=a.parent().attr("data-hotspot-image")}window.TS_VCSC_HotspotSingleViewCustom.__super__.editElement.call(this,e)}}),window.TS_VCSC_IconTabsContainerViewCustom=vc.shortcode_view.extend({new_tab_adding:!1,events:{"click .add_tab":"addTab","click > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone","click .wpb_save_edit_form":"save"},initialize:function(t){window.TS_VCSC_IconTabsContainerViewCustom.__super__.initialize.call(this,t),_.bindAll(this,"stopSorting")},render:function(){window.TS_VCSC_IconTabsContainerViewCustom.__super__.render.call(this);var t=this.model.get("params");return this.$tabs=this.$el.find(".wpb_tabs_holder"),this.createAddTabButton(),t.tab_contid||(t.tab_contid=+new Date+"-"+Math.floor(11*Math.random()),this.model.save("params",t)),this.id="tabs-"+t.tab_contid,this.$el.attr("id",this.id),this},ready:function(t){return window.TS_VCSC_IconTabsContainerViewCustom.__super__.ready.call(this,t),this},createAddTabButton:function(){var e=+new Date+"-"+Math.floor(11*Math.random());this.$tabs.append('<div id="new-tab-'+e+'" class="new_element_button"></div>'),this.$add_button=t('<li class="add_tab_block"><a href="#new-tab-'+e+'" class="add_tab" title="'+window.i18nLocale.add_tab+'"></a></li>').appendTo(this.$tabs.find(".tabs_controls"))},addTab:function(t){t.preventDefault(),this.new_tab_adding=!0;var e=window.i18nLocale.tab,a=this.$tabs.find("[data-element_type=TS_VCSC_Fancy_Tabs_Single]").length,o=+new Date+"-"+a+"-"+Math.floor(11*Math.random());return vc.shortcodes.create({shortcode:"TS_VCSC_Fancy_Tabs_Single",params:{title:e,tab_id:o},parent_id:this.model.id}),!1},stopSorting:function(){var e;this.$tabs.find("ul.tabs_controls li:not(.add_tab_block)").each(function(){t(this).find("a").attr("href").replace("#","");e=vc.shortcodes.get(t("[id="+t(this).attr("aria-controls")+"]").data("model-id")),vc.storage.lock(),e.save({order:t(this).index()})}),e.save()},changedContent:function(e){var a=e.model.get("params");if(this.$tabs.hasClass("ui-tabs")||(this.$tabs.tabs({select:function(e,a){return t(a.tab).hasClass("add_tab")?!1:!0}}),this.$tabs.find(".ui-tabs-nav").prependTo(this.$tabs),this.$tabs.find(".ui-tabs-nav").sortable({axis:"vc_tour"==this.$tabs.closest("[data-element_type]").data("element_type")?"y":"x",update:this.stopSorting,items:"> li:not(.add_tab_block)"})),e.model.get("cloned")===!0){var o=(e.model.get("cloned_from"),t(".tabs_controls > .add_tab_block",this.$content)),n=t("<li><a href='#tab-"+a.tab_id+"'>"+a.title+"</a></li>").insertBefore(o);this.$tabs.tabs("refresh"),this.$tabs.tabs("option","active",n.index())}else a.icon&&"transparent"!=a.icon&&void 0!=a.icon?a.color_tab&&"true"==a.customize&&void 0!=a.color_tab?t("<li><i class='ts-tab-icon "+a.icon+"'></i><a href='#tab-"+a.tab_id+"'>"+a.title+"</a><span class='ts-tab-background' style='background: "+a.color_tab+";'></span></li>").insertBefore(this.$add_button):t("<li><i class='ts-tab-icon "+a.icon+"'></i><a href='#tab-"+a.tab_id+"'>"+a.title+"</a></li>").insertBefore(this.$add_button):a.color_tab&&"true"==a.customize&&void 0!=a.color_tab?t("<li><a href='#tab-"+a.tab_id+"'>"+a.title+"</a><span class='ts-tab-background' style='background: "+a.color_tab+";'></span></li>").insertBefore(this.$add_button):t("<li><a href='#tab-"+a.tab_id+"'>"+a.title+"</a></li>").insertBefore(this.$add_button),this.$tabs.tabs("refresh"),this.$tabs.tabs("option","active",this.new_tab_adding?t(".ui-tabs-nav li",this.$content).length-2:0);this.new_tab_adding=!1},cloneModel:function(a,o,n){var i,r=_.isBoolean(n)&&n===!0?a.get("order"):parseFloat(a.get("order"))+vc.clone_index,s=_.extend({},a.get("params"));return"TS_VCSC_Fancy_Tabs_Container"===a.get("shortcode")&&_.extend(s,{tab_contid:+new Date+"-"+t(".wpb_TS_VCSC_Fancy_Tabs_Container").length+"-"+Math.floor(11*Math.random())}),"TS_VCSC_Fancy_Tabs_Single"===a.get("shortcode")&&_.extend(s,{tab_id:+new Date+"-"+t(".wpb_TS_VCSC_Fancy_Tabs_Single").length+"-"+Math.floor(11*Math.random())}),i=e.create({shortcode:a.get("shortcode"),id:vc_guid(),parent_id:o,order:r,cloned:"TS_VCSC_Fancy_Tabs_Single"===a.get("shortcode")?!1:!0,cloned_from:a.toJSON(),params:s}),_.each(e.where({parent_id:a.id}),function(t){this.cloneModel(t,i.get("id"),!0)},this),i}}),window.TS_VCSC_IconTabsSingleViewCustom=window.VcColumnView.extend({events:{"click > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-prepend":"addElement","click > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone","click > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},render:function(){var t=this.model.get("params");return window.TS_VCSC_IconTabsSingleViewCustom.__super__.render.call(this),t.tab_id||(t.tab_id=+new Date+"-"+Math.floor(11*Math.random()),this.model.save("params",t)),this.id="tab-"+t.tab_id,this.$el.attr("id",this.id),this},ready:function(t){window.TS_VCSC_IconTabsSingleViewCustom.__super__.ready.call(this,t),this.$tabs=this.$el.closest(".wpb_tabs_holder");this.model.get("params");return this},changeShortcodeParams:function(e){{var a=e.get("params");e._changing}window.TS_VCSC_IconTabsSingleViewCustom.__super__.changeShortcodeParams.call(this,e),_.isObject(a)&&_.isString(a.title)&&_.isString(a.tab_id)&&t(".ui-tabs-nav [href=#tab-"+a.tab_id+"]").text(a.title),t(".ui-tabs-nav [href=#tab-"+a.tab_id+"]").parent().find("i.ts-tab-icon").remove(),a.icon&&"transparent"!=a.icon&&void 0!=a.icon&&t(".ui-tabs-nav [href=#tab-"+a.tab_id+"]").before("<i class='ts-tab-icon "+a.icon+"'></i>"),t(".ui-tabs-nav [href=#tab-"+a.tab_id+"]").parent().find("span.ts-tab-background").remove(),"true"==a.customize&&void 0!=a.color_tab&&t(".ui-tabs-nav [href=#tab-"+a.tab_id+"]").after("<span class='ts-tab-background' style='background: "+a.color_tab+";'></span>")},deleteShortcode:function(e){_.isObject(e)&&e.preventDefault();var a=confirm(window.i18nLocale.press_ok_to_delete_section),o=this.model.get("parent_id");if(a!==!0)return!1;if(this.model.destroy(),!vc.shortcodes.where({parent_id:o}).length)return vc.shortcodes.get(o).destroy(),!1;var n=this.model.get("params"),i=t("[href=#tab-"+n.tab_id+"]",this.$tabs).parent().index();t("[href=#tab-"+n.tab_id+"]").parent().remove();var r=this.$tabs.find(".ui-tabs-nav li:not(.add_tab_block)").length;r>0&&this.$tabs.tabs("refresh"),r>i?this.$tabs.tabs("option","active",i):r>0&&this.$tabs.tabs("option","active",r-1)},cloneModel:function(t,a,o){var n=_.isBoolean(o)&&o===!0?t.get("order"):parseFloat(t.get("order"))+vc.clone_index,i=_.extend({},t.get("params"));"TS_VCSC_Fancy_Tabs_Single"===t.get("shortcode")&&_.extend(i,{tab_id:+new Date+"-"+this.$tabs.find("[data-element_type=TS_VCSC_Fancy_Tabs_Single]").length+"-"+Math.floor(11*Math.random())});var r=e.create({shortcode:t.get("shortcode"),parent_id:a,order:n,cloned:!0,cloned_from:t.toJSON(),params:i});return _.each(e.where({parent_id:t.id}),function(t){this.cloneModel(t,r.id,!0)},this),r}}),window.TS_VCSC_CircleStepSingleViewCustom=window.VcColumnView.extend({events:{"click > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-prepend":"addElement","click > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone","click > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},render:function(){var t=this.model.get("params");return window.TS_VCSC_CircleStepSingleViewCustom.__super__.render.call(this),t.hash_id||(t.hash_id="step-"+(+new Date+"-"+Math.floor(1e6*Math.random())),this.model.save("params",t)),this.id="circle-"+t.hash_id,this.$el.attr("id",this.id),this},ready:function(t){return window.TS_VCSC_IconTabsSingleViewCustom.__super__.ready.call(this,t),this},changeShortcodeParams:function(t){return window.TS_VCSC_CircleStepSingleViewCustom.__super__.changeShortcodeParams.call(this,t),this},cloneModel:function(t,a,o){var n=_.isBoolean(o)&&o===!0?t.get("order"):parseFloat(t.get("order"))+vc.clone_index,i=_.extend({},t.get("params")),r="step-"+(+new Date+"-"+Math.floor(1e6*Math.random()));"TS_VCSC_Circle_Steps_Item"===t.get("shortcode")&&_.extend(i,{hash_id:r});var s=e.create({shortcode:t.get("shortcode"),parent_id:a,order:n,cloned:!0,cloned_from:t.toJSON(),params:i});return _.each(e.where({parent_id:t.id}),function(t){this.cloneModel(t,s.id,!0)},this),s}})}})}(jQuery);