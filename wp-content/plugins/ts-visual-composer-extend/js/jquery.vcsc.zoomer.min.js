!function(t,e){"use strict";function o(e){e=t.extend({},A,_,e),C=B("transform");for(var o=t(this),a=0,r=o.length;r>a;a++)i(o.eq(a),e);return D=t(".zoomer-element"),M(),o}function i(e,o){if(!e.data("zoomer")){o=t.extend({},o,e.data("zoomer-options")),o.$target=e,o.marginReal=2*o.marginMin,o.originalDOM=o.$target.html(),o.$target.find("img").length>0&&(o.source=[],o.lightbox=[],o.trigger=[],o.rotate=[],o.reset=[],o.$target.find("img").each(function(){o.source.push(t(this).attr("src")),o.lightbox.push(t(this).attr("data-lightbox")),o.trigger.push(t(this).attr("data-trigger")),o.reset.push(t(this).attr("data-reset")),o.rotate.push(t(this).attr("data-rotate"))}),o.$target.empty()),o=L(o);var i='<div class="zoomer '+o.customClass+'">';i+='<div class="zoomer-positioner">',i+='<div class="zoomer-holder">',i+="</div>",i+="</div>",i+="</div>",o.$zoomer=t(i),o.$target.addClass("zoomer-element").html(o.$zoomer),o.controls.zoomIn||o.controls.zoomOut||o.controls.next||o.controls.previous||o.controls.reset||o.controls.rotate||o.controls.lightbox?(o.controls.$zoomIn=t(o.controls.zoomIn),o.controls.$zoomOut=t(o.controls.zoomOut),o.controls.$zoomLevel=t(o.controls.zoomLevel),o.controls.$next=t(o.controls.next),o.controls.$previous=t(o.controls.previous),o.controls.$reset=t(o.controls.reset),o.controls.$rotate=t(o.controls.rotate),o.controls.$lightbox=t(o.controls.lightbox)):(i='<div class="zoomer-controls zoomer-controls-'+o.controls.position+'">',i+='<span class="zoomer-previous" title="'+o.text.prev+'">&lsaquo;</span>',i+='<span class="zoomer-zoom-out" title="'+o.text.zoomOut+'">-</span>',i+='<span class="zoomer-zoom-in" title="'+o.text.zoomIn+'">+</span>',i+='<span class="zoomer-zoom-level" title="'+o.text.zoomLevel+'">%</span>',i+='<span class="zoomer-next" title="'+o.text.next+'">&rsaquo;</span>',i+='<span class="zoomer-reset" title="'+o.text.reset+'">X</span>',i+='<span class="zoomer-rotate" title="'+o.text.rotate+'">&#8631</span>',i+='<span class="zoomer-lightbox" title="'+o.text.lightbox+'">x</span>',i+="</div>",o.$zoomer.append(i),o.controls.$default=o.$zoomer.find(".zoomer-controls"),o.controls.$zoomIn=o.$zoomer.find(".zoomer-zoom-in"),o.controls.$zoomLevel=o.$zoomer.find(".zoomer-zoom-level"),o.controls.$zoomOut=o.$zoomer.find(".zoomer-zoom-out"),o.controls.$next=o.$zoomer.find(".zoomer-next"),o.controls.$previous=o.$zoomer.find(".zoomer-previous"),o.controls.$reset=o.$zoomer.find(".zoomer-reset"),o.controls.$rotate=o.$zoomer.find(".zoomer-rotate"),o.controls.$lightbox=o.$zoomer.find(".zoomer-lightbox")),o.$positioner=o.$zoomer.find(".zoomer-positioner"),o.$holder=o.$zoomer.find(".zoomer-holder"),o.controls.$zoomIn.on("touchstart.zoomer mousedown.zoomer",o,u).on("touchend.zoomer mouseup.zoomer",o,f),o.controls.$zoomOut.on("touchstart.zoomer mousedown.zoomer",o,p).on("touchend.zoomer mouseup.zoomer",o,f),o.controls.$next.on("click.zoomer",o,d),o.controls.$previous.on("click.zoomer",o,c),o.controls.$reset.on("touchstart.zoomer mousedown.zoomer",o,R).on("touchend.zoomer mouseup.zoomer",o,f),o.controls.$rotate.on("click.zoomer",o,Y),o.controls.$lightbox.on("click.zoomer",o,S),o.$zoomer.on("mousedown.zoomer",o,v).on("touchstart.zoomer MSPointerDown.zoomer",":not(.zoomer-controls)",o,x),o.reset||o.controls.$reset.hide(),o.rotate||o.controls.$rotate.hide(),o.lightbox||o.controls.$lightbox.hide(),o.$target.data("zoomer",o),q.resize.apply(o.$target),o.images.length>0&&a.apply(o.$target,[o])}}function a(t){t.gallery?t.$zoomer.addClass("zoomer-gallery"):t.$zoomer.removeClass("zoomer-gallery"),"undefined"!=typeof t.$image?t.$holder.animate({opacity:0},300,function(){q.unload.apply(t.$target),r.apply(t.$target,[t,t.images[t.index]])}):r.apply(t.$target,[t,t.images[t.index]])}function r(e,o){if(e.loading=!0,e.tiled){e.tilesTotal=0,e.tilesLoaded=0;var i='<div class="zoomer-tiles">';for(var a in e.images[0])if(e.images[0].hasOwnProperty(a))for(var r in e.images[0][a])e.images[0][a].hasOwnProperty(r)&&(i+='<img class="zoomer-image zoomer-tile" data-no-lazy="1" src="'+e.images[0][a][r]+'" data-zoomer-tile="'+a+"-"+r+'" />',e.tilesTotal++);i+="</div>",e.$image=t(i),e.$tiles=e.$image.find("img"),e.$tiles.each(function(o,i){var a=t(i);a.one("load",e,n),a[0].complete&&a.trigger("load")})}else e.$image=t('<img class="zoomer-image" data-no-lazy="1"/>'),e.$image.one("load.zoomer",e,s).attr("src",o),e.$image[0].complete&&e.$image.trigger("load");if("true"==e.lightbox?e.controls.$lightbox.show():e.controls.$lightbox.hide(),"true"==e.reset?e.controls.$reset.show():e.controls.$reset.hide(),"true"==e.rotate?e.controls.$rotate.show():e.controls.$rotate.hide(),"top"==e.controls.position||"bottom"==e.controls.position){var g=e.controls.$default.outerWidth()/2;e.controls.$default.css("margin-left",-g+"px")}else if("left"==e.controls.position||"right"==e.controls.position){var g=e.controls.$default.outerHeight()/2;e.controls.$default.css("margin-top",-g+"px")}}function n(t){var e=t.data;e.tilesLoaded++,e.tilesLoaded===e.tilesTotal&&(e.tiledRows=e.images[0].length,e.tiledColumns=e.images[0][0].length,e.tiledHeight=e.$tiles.eq(0)[0].naturalHeight*e.tiledRows,e.tiledWidth=e.$tiles.eq(0)[0].naturalWidth*e.tiledColumns,s({data:e}))}function s(e){var o=e.data;if(o.tiled?(o.naturalHeight=o.tiledHeight,o.naturalWidth=o.tiledWidth):(o.naturalHeight=o.$image[0].naturalHeight,o.naturalWidth=o.$image[0].naturalWidth),o.retina&&(o.naturalHeight/=2,o.naturalWidth/=2),o.$holder.css({height:o.naturalHeight,width:o.naturalWidth}),o.targetImageHeight=o.minHeight=o.maxHeight=o.naturalHeight,o.targetImageWidth=o.minWidth=o.maxWidth=o.naturalWidth,o.imageRatioWide=o.naturalWidth/o.naturalHeight,o.imageRatioTall=o.naturalHeight/o.naturalWidth,(o.naturalHeight>o.frameHeight-o.marginReal||o.naturalWidth>o.frameWidth-o.marginReal)&&(o=m(o),o.targetImageHeight=o.minHeight,o.targetImageWidth=o.minWidth),o.positionerLeft=o.targetPositionerLeft=o.centerLeft,o.positionerTop=o.targetPositionerTop=o.centerTop,o.imageLeft=o.targetImageLeft=Math.round(-o.targetImageWidth/2),o.imageTop=o.targetImageTop=Math.round(-o.targetImageHeight/2),o.imageHeight=o.targetImageHeight,o.imageWidth=o.targetImageWidth,C){var i=o.imageWidth/o.naturalWidth,a=o.imageHeight/o.naturalHeight;o.$positioner.css(E("transform","translate3d("+o.positionerLeft+"px, "+o.positionerTop+"px, 0)")),o.$holder.css(E("transform","translate3d(-50%, -50%, 0) scale("+i+","+a+")"));var r=(Math.round(1e4*i)/100).toFixed(0);o.controls.$zoomLevel.empty().html(r+"%")}else o.$positioner.css({left:o.positionerLeft,top:o.positionerTop}),o.$holder.css({left:o.imageLeft,top:o.imageTop,height:o.imageHeight,width:o.imageWidth}),o.controls.$zoomLevel.hide();o.$holder.append(o.$image),o.tiled&&(o.$holder.css({background:"url("+o.tiledThumbnail+") no-repeat left top",backgroundSize:"100% 100%"}),o.tileHeightPercentage=100/o.tiledRows,o.tileWidthPercentage=100/o.tiledColumns,o.$tiles.css({height:o.tileHeightPercentage+"%",width:o.tileWidthPercentage+"%"}),o.$tiles.each(function(e,i){var a=t(i),r=a.data("zoomer-tile").split("-");a.css({left:o.tileWidthPercentage*parseInt(r[1],10)+"%",top:o.tileHeightPercentage*parseInt(r[0],10)+"%"})})),o.$holder.animate({opacity:1},300),o.loading=!1,o.gallery&&g(o)}function g(e){e.index>0&&t('<img src="'+e.images[e.index-1]+'">'),e.index<e.images.length-1&&t('<img src="'+e.images[e.index+1]+'">')}function m(t){return t.naturalHeight>t.naturalWidth?(t.aspect="tall",t.minHeight=Math.round(t.frameHeight-t.marginReal),t.minWidth=Math.round(t.minHeight/t.imageRatioTall),t.minWidth>t.frameWidth-t.marginReal&&(t.minWidth=Math.round(t.frameWidth-t.marginReal),t.minHeight=Math.round(t.minWidth/t.imageRatioWide))):(t.aspect="wide",t.minWidth=Math.round(t.frameWidth-t.marginReal),t.minHeight=Math.round(t.minWidth/t.imageRatioWide),t.minHeight>t.frameHeight-t.marginReal&&(t.minHeight=Math.round(t.frameHeight-t.marginReal),t.minWidth=Math.round(t.minHeight/t.imageRatioTall))),t}function l(){for(var t=0,e=D.length;e>t;t++){var o=D.eq(t).data("zoomer");if("object"==typeof o){if(o=h(o),o.lastAction=o.action,C){var i=o.imageWidth/o.naturalWidth,a=o.imageHeight/o.naturalHeight;o.$positioner.css(E("transform","translate3d("+o.positionerLeft+"px, "+o.positionerTop+"px, 0)")),o.$holder.css(E("transform","translate3d(-50%, -50%, 0) scale("+i+","+a+")"));var r=(Math.round(1e4*i)/100).toFixed(0);o.controls.$zoomLevel.empty().html(r+"%")}else o.$positioner.css({left:o.positionerLeft,top:o.positionerTop}),o.$holder.css({left:o.imageLeft,top:o.imageTop,width:o.imageWidth,height:o.imageHeight}),o.controls.$zoomLevel.hide();o.callback&&o.callback.apply(o.$zoomer,[(o.imageWidth-o.minWidth)/(o.maxWidth-o.minWidth)])}}}function h(t){if("zoom_in"===t.action||"zoom_out"===t.action){t.keyDownTime+=t.increment;var e=("zoom_out"===t.action?-1:1)*Math.round(t.imageWidth*t.keyDownTime-t.imageWidth);"tall"===t.aspect?(t.targetImageHeight+=e,t.targetImageWidth=Math.round(t.targetImageHeight/t.imageRatioTall)):(t.targetImageWidth+=e,t.targetImageHeight=Math.round(t.targetImageWidth/t.imageRatioWide))}return"tall"===t.aspect?t.targetImageHeight<t.minHeight?(t.targetImageHeight=t.minHeight,t.targetImageWidth=Math.round(t.targetImageHeight/t.imageRatioTall)):t.targetImageHeight>t.maxHeight&&(t.targetImageHeight=t.maxHeight,t.targetImageWidth=Math.round(t.targetImageHeight/t.imageRatioTall)):t.targetImageWidth<t.minWidth?(t.targetImageWidth=t.minWidth,t.targetImageHeight=Math.round(t.targetImageWidth/t.imageRatioWide)):t.targetImageWidth>t.maxWidth&&(t.targetImageWidth=t.maxWidth,t.targetImageHeight=Math.round(t.targetImageWidth/t.imageRatioWide)),t.targetImageLeft=Math.round(.5*-t.targetImageWidth),t.targetImageTop=Math.round(.5*-t.targetImageHeight),"drag"===t.action||"pinch"===t.action?(t.imageWidth=t.targetImageWidth,t.imageHeight=t.targetImageHeight,t.imageLeft=t.targetImageLeft,t.imageTop=t.targetImageTop):(t.imageWidth+=Math.round((t.targetImageWidth-t.imageWidth)*t.enertia),t.imageHeight+=Math.round((t.targetImageHeight-t.imageHeight)*t.enertia),t.imageLeft+=Math.round((t.targetImageLeft-t.imageLeft)*t.enertia),t.imageTop+=Math.round((t.targetImageTop-t.imageTop)*t.enertia)),t.boundsLeft=Math.round(t.frameWidth-.5*t.targetImageWidth-t.marginMax),t.boundsRight=Math.round(.5*t.targetImageWidth+t.marginMax),t.boundsTop=Math.round(t.frameHeight-.5*t.targetImageHeight-t.marginMax),t.boundsBottom=Math.round(.5*t.targetImageHeight+t.marginMax),t.targetPositionerLeft<t.boundsLeft&&(t.targetPositionerLeft=t.boundsLeft),t.targetPositionerLeft>t.boundsRight&&(t.targetPositionerLeft=t.boundsRight),t.targetPositionerTop<t.boundsTop&&(t.targetPositionerTop=t.boundsTop),t.targetPositionerTop>t.boundsBottom&&(t.targetPositionerTop=t.boundsBottom),t.zoomPositionTop>0&&t.zoomPositionLeft>0&&(t.targetPositionerLeft=t.centerLeft-t.targetImageLeft-t.targetImageWidth*t.zoomPositionLeft,t.targetPositionerTop=t.centerTop-t.targetImageTop-t.targetImageHeight*t.zoomPositionTop),"pinch"!==t.action&&(t.targetImageWidth<t.frameWidth&&(t.targetPositionerLeft=t.centerLeft),t.targetImageHeight<t.frameHeight&&(t.targetPositionerTop=t.centerTop)),"drag"===t.action||"pinch"===t.action?(t.positionerLeft=t.targetPositionerLeft,t.positionerTop=t.targetPositionerTop):(t.positionerLeft+=Math.round((t.targetPositionerLeft-t.positionerLeft)*t.enertia),t.positionerTop+=Math.round((t.targetPositionerTop-t.positionerTop)*t.enertia)),t.oldImageWidth=t.imageWidth,t.oldImageHeight=t.imageHeight,t}function d(t){var e=t.data;e=w(e),!e.loading&&e.index+1<e.images.length&&(e.index++,a.apply(e.$target,[e]))}function c(t){var e=t.data;e=w(e),!e.loading&&e.index-1>=0&&(e.index--,a.apply(e.$target,[e]))}function u(t){t.preventDefault(),t.stopPropagation();var e=t.data;e=z(e),e.keyDownTime=1,e.action="zoom_in"}function p(t){t.preventDefault(),t.stopPropagation();var e=t.data;e=z(e),e.keyDownTime=1,e.action="zoom_out"}function f(t){t.preventDefault(),t.stopPropagation();var e=t.data;e=$(e),e.keyDownTime=0,e.action=""}function z(t,e,o){return e=e||.5*t.imageWidth,o=o||.5*t.imageHeight,t.zoomPositionLeft=(e-(t.positionerLeft-t.centerLeft))/t.imageWidth,t.zoomPositionTop=(o-(t.positionerTop-t.centerTop))/t.imageHeight,t}function $(t){return t.zoomPositionTop=0,t.zoomPositionLeft=0,t}function v(t){t.preventDefault&&(t.preventDefault(),t.stopPropagation());var e=t.data;e.action="drag",e.mouseX=t.pageX,e.mouseY=t.pageY,e.targetPositionerLeft=e.positionerLeft,e.targetPositionerTop=e.positionerTop,k.on("mousemove.zoomer",e,W).on("mouseup.zoomer",e,H)}function W(t){t.preventDefault&&(t.preventDefault(),t.stopPropagation());var e=t.data;t.pageX&&t.pageY&&(e.targetPositionerLeft-=Math.round(e.mouseX-t.pageX),e.targetPositionerTop-=Math.round(e.mouseY-t.pageY),e.mouseX=t.pageX,e.mouseY=t.pageY)}function H(t){t.preventDefault&&(t.preventDefault(),t.stopPropagation());var e=t.data;e.action="",k.off("mousemove.zoomer mouseup.zoomer")}function x(e){if(!(t(e.target).parent(".zoomer-controls").length>0)){e.preventManipulation&&e.preventManipulation(),e.preventDefault(),e.stopPropagation();var o=e.data,i=e.originalEvent;if(i.type.match(/(up|end)$/i))return void T(o,i);if(i.pointerId){var a=!1;for(var r in o.touches)o.touches[r].identifier===i.pointerId&&(a=!0,o.touches[r].pageX=i.clientX,o.touches[r].pageY=i.clientY);a||o.touches.push({identifier:i.pointerId,pageX:i.clientX,pageY:i.clientY})}else o.touches=i.touches;i.type.match(/(down|start)$/i)?I(o):i.type.match(/move$/i)&&P(o)}}function I(t){t.touchEventsBound||(t.touchEventsBound=!0,k.on("touchmove.zoomer MSPointerMove.zoomer",t,x).on("touchend.zoomer MSPointerUp.zoomer",t,x)),t.zoomPercentage=1,t.touches.length>=2&&(t.offset=t.$zoomer.offset(),t.pinchStartX0=t.touches[0].pageX-t.offset.left,t.pinchStartY0=t.touches[0].pageY-t.offset.top,t.pinchStartX1=t.touches[1].pageX-t.offset.left,t.pinchStartY1=t.touches[1].pageY-t.offset.top,t.pinchStartX=(t.pinchStartX0+t.pinchStartX1)/2,t.pinchStartY=(t.pinchStartY0+t.pinchStartY1)/2,t.imageWidthStart=t.imageWidth,t.imageHeightStart=t.imageHeight,z(t),t.pinchDeltaStart=Math.sqrt(Math.pow(t.pinchStartX1-t.pinchStartX0,2)+Math.pow(t.pinchStartY1-t.pinchStartY0,2))),t.mouseX=t.touches[0].pageX,t.mouseY=t.touches[0].pageY}function P(t){1===t.touches.length?(t.action="drag",t.targetPositionerLeft-=t.mouseX-t.touches[0].pageX,t.targetPositionerTop-=t.mouseY-t.touches[0].pageY):t.touches.length>=2&&(t.action="pinch",t.pinchEndX0=t.touches[0].pageX-t.offset.left,t.pinchEndY0=t.touches[0].pageY-t.offset.top,t.pinchEndX1=t.touches[1].pageX-t.offset.left,t.pinchEndY1=t.touches[1].pageY-t.offset.top,(t.pinchEndX0!==t.lastPinchEndX0||t.pinchEndY0!==t.lastPinchEndY0||t.pinchEndX1!==t.lastPinchEndX1||t.pinchEndY1!==t.lastPinchEndY1)&&(t.pinchDeltaEnd=Math.sqrt(Math.pow(t.pinchEndX1-t.pinchEndX0,2)+Math.pow(t.pinchEndY1-t.pinchEndY0,2)),t.zoomPercentage=t.pinchDeltaEnd/t.pinchDeltaStart,t.targetImageWidth=Math.round(t.imageWidthStart*t.zoomPercentage),t.targetImageHeight=Math.round(t.imageHeightStart*t.zoomPercentage),t.pinchEndX=(t.pinchEndX0+t.pinchEndX1)/2,t.pinchEndY=(t.pinchEndY0+t.pinchEndY1)/2,t.lastPinchEndX0=t.pinchEndX0,t.lastPinchEndY0=t.pinchEndY0,t.lastPinchEndX1=t.pinchEndX1,t.lastPinchEndY1=t.pinchEndY1)),t.mouseX=t.touches[0].pageX,t.mouseY=t.touches[0].pageY}function T(t,e){if(t.action="",t.lastPinchEndX0=t.pinchEndX0=t.pinchStartX0=0,t.lastPinchEndY0=t.pinchEndY0=t.pinchStartY0=0,t.lastPinchEndX1=t.pinchEndX1=t.pinchStartX1=0,t.lastPinchEndY1=t.pinchEndY1=t.pinchStartY1=0,t.pinchStartX=t.pinchEndX=0,t.pinchStartY=t.pinchEndX=0,$(t),e.pointerId)for(var o in t.touches)t.touches[o].identifier===e.pointerId&&t.touches.splice(o,1);k.off(".zoomer"),t.touchEventsBound=!1}function L(t){return t.tiled=!1,t.gallery=!1,"string"==typeof t.source?t.images=[t.source]:"string"==typeof t.source[0]?(t.images=t.source,t.images.length>1&&(t.gallery=!0)):(t.tiledThumbnail=t.source.thumbnail,t.images=[t.source.tiles],t.tiled=!0),t}function M(){O||(O=!0,X())}function b(){O=!1}function X(){O&&(e.requestAnimationFrame(X),l())}function E(t,e){var o={};return o["-webkit-"+t]=e,o["-moz-"+t]=e,o["-ms-"+t]=e,o["-o-"+t]=e,o[t]=e,o}function Y(t){t.preventDefault(),t.stopPropagation();var e=t.data;e=y(e),e.keyDownTime=1,e.action=""}function y(e){return t({deg:e.rotatePos}).animate({deg:e.rAngle},{step:function(t){e.$zoomer.find(".zoomer-image").css({"-webkit-transform":"rotate("+t+"deg)","-moz-transform":"rotate("+t+"deg)","-ms-transform":"rotate("+t+"deg)",transform:"rotate("+t+"deg)"})}}),e.rotatePos=e.rotatePos+90,e.rAngle=e.rAngle+90,e}function w(t){return t.rotatePos=0,t.rAngle=90,t}function S(e){e.preventDefault(),e.stopPropagation();var o=e.data;"true"==o.lightbox&&t("#"+o.trigger).click()}function R(t){t.preventDefault(),t.stopPropagation();var e=t.data;e=z(e),e.keyDownTime=100,e.action="zoom_out"}var D,k=t(e),O=!1,C=!1,A={callback:t.noop,controls:{position:"bottom",zoomIn:null,zoomOut:null,zoomLevel:null,next:null,previous:null,reset:null,rotate:null,lightbox:null},text:{zoomIn:"Zoom In",zoomOut:"Zoom Out",zoomLevel:"Zoom Level",next:"Next",previous:"Previous",reset:"Reset",rotate:"Rotate",lightbox:"Open in Lightbox"},customClass:"",enertia:.2,increment:.01,marginMin:30,marginMax:100,zoomLevel:!0,reset:!0,rotate:!1,lightbox:!0,retina:!1,source:null},_={images:[],aspect:"",action:"",lastAction:"",keyDownTime:0,marginReal:0,originalDOM:"",gallery:!1,index:0,$tiles:null,tiled:!1,tilesTotal:0,tilesLoaded:0,tiledColumns:0,tiledRows:0,tiledHeight:0,tiledWidth:0,tiledThumbnail:null,centerLeft:0,centerTop:0,frameHeight:0,frameWidth:0,naturalHeight:0,naturalWidth:0,imageRatioWide:0,imageRatioTall:0,minHeight:null,minWidth:null,maxHeight:0,maxWidth:0,boundsTop:0,boundsBottom:0,boundsLeft:0,boundsRight:0,imageWidth:0,imageHeight:0,imageLeft:0,imageTop:0,targetImageWidth:0,targetImageHeight:0,targetImageLeft:0,targetImageTop:0,oldImageWidth:0,oldImageHeight:0,positionerLeft:0,positionerTop:0,targetPositionerLeft:0,targetPositionerTop:0,zoomPositionLeft:0,zoomPositionTop:0,offset:null,touches:[],zoomPercentage:1,rAngle:90,rotatePos:0,pinchStartX0:0,pinchStartX1:0,pinchStartY0:0,pinchStartY1:0,pinchEndX0:0,pinchEndX1:0,pinchEndY0:0,pinchEndY1:0,lastPinchEndX0:0,lastPinchEndY0:0,lastPinchEndX1:0,lastPinchEndY1:0,pinchDeltaStart:0,pinchDeltaEnd:0},q={defaults:function(e){return A=t.extend(A,e||{}),"object"==typeof this?t(this):!0},destroy:function(){var e=t(this).each(function(e,o){var i=t(o).data("zoomer");i&&(k.off(".zoomer"),i.$holder.off(".zoomer"),i.$zoomer.off(".zoomer"),i.controls.$zoomIn.off(".zoomer"),i.controls.$zoomOut.off(".zoomer"),i.controls.$next.off(".zoomer"),i.controls.$previous.off(".zoomer"),i.controls.$reser.off(".zoomer"),i.controls.$rotate.off(".zoomer"),i.controls.$lightbox.off(".zoomer"),i.$target.removeClass("zoomer-element").data("zoomer",null).empty().append(i.originalDOM))});return D=t(".zoomer-element"),D.length<1&&b(),e},load:function(e){return t(this).each(function(o,i){var r=t(i).data("zoomer");r&&(r.source=e,r.index=0,r=L(r),a(r))})},pan:function(e,o){return t(this).each(function(i,a){var r=t(a).data("zoomer");r&&(e/=100,o/=100,r.targetPositionerLeft=Math.round(r.centerLeft-r.targetImageLeft-r.targetImageWidth*e),r.targetPositionerTop=Math.round(r.centerTop-r.targetImageTop-r.targetImageHeight*o))})},resize:function(){return t(this).each(function(e,o){var i=t(o).data("zoomer");if(i)if(i.frameWidth=i.$target.outerWidth(),i.frameHeight=i.$target.outerHeight(),i.centerLeft=Math.round(.5*i.frameWidth),i.centerTop=Math.round(.5*i.frameHeight),i.minHeight=i.naturalHeight,i.minWidth=i.naturalWidth,(i.naturalHeight>i.frameHeight-i.marginReal||i.naturalWidth>i.frameWidth-i.marginReal)&&(i=m(i)),"top"==i.controls.position||"bottom"==i.controls.position){var a=i.controls.$default.outerWidth();if(a>i.frameWidth)var r=a-i.frameWidth;else if(i.frameWidth>a)var r=i.frameWidth-a;var n=i.controls.$default.outerWidth()/2;i.controls.$default.css("margin-left",-n+"px")}else if("left"==i.controls.position||"right"==i.controls.position){var a=i.controls.$default.outerHeight();if(a>i.frameHeight){var r=a-i.frameHeight;"true"==i.rotate&&(r-=i.controls.$rotate.height(),i.controls.$rotate.hide()),"true"==i.reset&&r>0&&(r-=i.controls.$reset.height(),i.controls.$reset.hide()),"true"==i.lightbox&&r>0&&(r-=i.controls.$reset.height(),i.controls.$lightbox.hide()),"true"==i.zoomLevel&&r>0&&(r-=i.controls.$reset.height(),i.controls.$zoomLevel.hide())}else if(i.frameHeight>a){var r=i.frameHeight-a;"true"==i.zoomLevel&&r>0&&(r-=i.controls.$zoomLevel.height(),i.controls.$zoomLevel.show()),"true"==i.lightbox&&r>0&&(r-=i.controls.$lightbox.height(),i.controls.$lightbox.show()),"true"==i.reset&&r>0&&(r-=i.controls.$reset.height(),i.controls.$reset.show()),"true"==i.rotate&&r>0&&(r-=i.controls.$rotate.height(),i.controls.$rotate.show())}var n=i.controls.$default.outerHeight()/2;i.controls.$default.css("margin-top",-n+"px")}})},unload:function(){return t(this).each(function(){var e=t(this).data("zoomer");e&&"undefined"!=typeof e.$image&&e.$image.remove()})}},B=function(){var t=document.createElement("div"),e="Khtml Ms O Moz Webkit".split(" "),o=e.length;return function(i){if(i in t.style)return!0;for(i=i.replace(/^[a-z]/,function(t){return t.toUpperCase()});o--;)if(e[o]+i in t.style)return!0;return!1}}();t.fn.TS_VCSC_ImageZoomer=function(t){return q[t]?q[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?this:o.apply(this,arguments)},t.TS_VCSC_ImageZoomer=function(t){"defaults"===t&&q.defaults.apply(this,Array.prototype.slice.call(arguments,1))}}(jQuery,window);