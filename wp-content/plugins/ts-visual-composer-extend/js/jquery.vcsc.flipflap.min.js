function TS_VCSC_SleepTimer(t){for(var e=(new Date).getTime(),s=0;1e7>s&&!((new Date).getTime()-e>t);s++);}!function(t){"use strict";function e(e){this.settings=e,this.domObject=document.createElement("div"),t(this.domObject).css("-webkit-transform-style","preserve-3d").css("-moz-transform-style","preserve-3d").css("-ms-transform-style","preserve-3d").css("-o-transform-style","preserve-3d").css("transform-style","preserve-3d").addClass("ts-splitflap-char"),this.upperObject=document.createElement("div"),this.lowerObject=document.createElement("div"),this.flippingObject=document.createElement("div"),t(this.upperObject).width(this.settings.charWidth).height(this.settings.charHeight>>1).css("background-image","url("+this.settings.image+")").addClass("upper"),t(this.lowerObject).width(this.settings.charWidth).height(this.settings.charHeight>>1).css("background-image","url("+this.settings.image+")").addClass("lower"),t(this.flippingObject).width(this.settings.charWidth).height(this.settings.charHeight>>1).css("background-image","url("+this.settings.image+")").css("position","absolute").css("left",0).css("top",0).hide().addClass("flipping"),t(this.domObject).append(this.upperObject),t(this.domObject).append(this.lowerObject),t(this.domObject).append(this.flippingObject)}function s(e){this.settings=e,this.domObject=document.createElement("div"),this.letters=new Array,t(this.domObject).addClass("ts-splitflap-letters")}if("undefined"==typeof i)var i=function(t,e){return function(){return t.apply(e,arguments)}};if("undefined"==typeof n)var n={};"function"!=typeof n.log&&(n.log=function(){}),Date.now=Date.now||function(){return(new Date).getTime()},function(){for(var t=0,e=["ms","moz","webkit","o"],s=0;s<e.length&&!window.requestAnimationFrame;++s)window.requestAnimationFrame=window[e[s]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[s]+"CancelAnimationFrame"]||window[e[s]+"CancelRequestAnimationFrame"];void 0===window.requestAnimationFrame&&(window.requestAnimationFrame=function(e){var s=Date.now(),i=Math.max(0,16-(s-t)),n=window.setTimeout(function(){e(s+i)},i);return t=s+i,n}),window.cancelAnimationFrame=window.cancelAnimationFrame||function(t){window.clearTimeout(t)}}();var r=function(t,e){return function(){return t.apply(e,arguments)}},a=e.prototype;a.getDOMObject=function(){return this.domObject},a.setChar=function(e,s,i){"undefined"==typeof i&&(i=1);var n=this.settings.charsMap.indexOf(e);if(t(this.upperObject).css("background-position","-"+n*this.settings.charWidth+"px 0px"),i>=1)t(this.lowerObject).css("background-position","-"+n*this.settings.charWidth+"px -"+(this.settings.charHeight>>1)+"px"),t(this.flippingObject).hide();else if(0>=i){var r=this.settings.charsMap.indexOf(s);t(this.upperObject).css("background-position","-"+r*this.settings.charWidth+"px 0px"),t(this.lowerObject).css("background-position","-"+r*this.settings.charWidth+"px -"+(this.settings.charHeight>>1)+"px"),t(this.flippingObject).hide()}else{var r=this.settings.charsMap.indexOf(s);t(this.lowerObject).css("background-position","-"+r*this.settings.charWidth+"px -"+(this.settings.charHeight>>1)+"px");var a;.5>i?(a=180*i,t(this.flippingObject).css("top",0).css("z-index",Math.round(a)).css("-webkit-transform","rotateX(-"+a+"deg)").css("-moz-transform","rotateX(-"+a+"deg)").css("-ms-transform","rotateX(-"+a+"deg)").css("-o-transform","rotateX(-"+a+"deg)").css("transform","rotateX(-"+a+"deg)").css("-webkit-transform-origin","bottom center 0").css("-moz-transform-origin","bottom center 0").css("-ms-transform-origin","bottom center 0").css("-o-transform-origin","bottom center 0").css("transform-origin","bottom center 0").css("background-position","-"+r*this.settings.charWidth+"px 0px")):(a=180*(1-i),t(this.flippingObject).css("top",(this.settings.charHeight>>1)+"px").css("z-index",Math.round(a)).css("-webkit-transform","rotateX("+a+"deg)").css("-moz-transform","rotateX("+a+"deg)").css("-ms-transform","rotateX("+a+"deg)").css("-o-transform","rotateX("+a+"deg)").css("transform","rotateX("+a+"deg)").css("-webkit-transform-origin","top center 0").css("-moz-transform-origin","top center 0").css("-ms-transform-origin","top center 0").css("-o-transform-origin","top center 0").css("transform-origin","top center 0").css("background-position","-"+n*this.settings.charWidth+"px -"+(this.settings.charHeight>>1)+"px")),t(this.flippingObject).show()}};var o=s.prototype;o.getDOMObject=function(){return this.domObject},o.build=function(s,i){var n=i.width(),r=Math.floor(n/this.settings.charWidth);t(this.domObject).css("position","relative"),t(this.domObject).width(s*this.settings.charWidth<n?s*this.settings.charWidth:r>s?s*this.settings.charWidth:r*this.settings.charWidth);for(var a=0;s>a;a++){var o=new e(this.settings),h=o.getDOMObject(),c=this.settings.text.charAt(a);t(h).css("position","relative"),t(h).attr("data-order",a),t(h).attr("data-letter",c),t(h).attr("data-index",this.settings.charsMap.indexOf(c)),t(this.domObject).append(h),this.letters[a]=o}},o.setText=function(t,e){var s;for("undefined"==typeof e?(e=t,s=!1):s=!0;e.length<this.letters.length;)"left"==this.settings.padDir?e+=this.settings.padChar:e=this.settings.padChar+e;for(var i=new String(e).split(""),n=0,r=this.letters.length;r>n;n++){var a=this.letters[n];a.setChar(i[n])}if(s){for(;t.length<this.letters.length;)"left"==this.settings.padDir?t+=this.settings.padChar:t=this.settings.padChar+t;var o=new String(t).split("");this.animation={time:(new Date).getTime(),letters:new Array};for(var n=0,r=this.letters.length;r>n;n++){for(var h={ratio:0,speed:this.settings.speed+Math.random()*this.settings.speedVariation,letters:new Array(i[n])},c=this.settings.charsMap.indexOf(i[n]);this.settings.charsMap.charAt(c)!=o[n];)c=(c+1)%this.settings.charsMap.length,h.letters.push(this.settings.charsMap.charAt(c));this.animation.letters[n]=h}this.settings.autoplay&&this.animate()}},o.delayText=function(t,e){for("undefined"==typeof e&&(e=t);e.length<this.letters.length;)"left"==this.settings.padDir?e+=this.settings.padChar:e=this.settings.padChar+e;for(var s=new String(e).split(""),i=0,n=this.letters.length;n>i;i++){var r=this.letters[i];r.setChar(s[i])}},o.animate=function(){var t=(new Date).getTime();"undefined"==typeof this.animation.time&&(this.animation.time=t);for(var e=.001*(t-this.animation.time),s=0,i=0,n=this.animation.letters.length;n>i;i++){var a=this.letters[i],o=this.animation.letters[i];o.letters.length>1&&(o.ratio+=o.speed*e,o.ratio>1&&o.letters.length>1&&(o.ratio=0,o.letters.shift())),o.letters.length>1?(a.setChar(o.letters[1],o.letters[0],o.ratio),s++):a.setChar(o.letters[0])}this.animation.time=t,s>0&&requestAnimationFrame(r(this.animate,this))},t.fn.TS_VCSC_SplitFlap=function(e){if("splitflap"==e){if(this.length<0)return!1;var i=this.get(0);return"undefined"==typeof i.splitflap?!1:i.splitflap}var n=t.extend({text:"",textInit:"",textFill:" ",textEqual:!0,textDots:!0,delay:0,autoplay:!0,restart:!0,language:"latin",image:"images/ts-flipflap-chars-large.png",charsMap:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789.,!?#@()+-=",charWidth:50,charHeight:100,padDir:"left",padChar:" ",speed:3,speedVariation:2},e);return this.each(function(){var e=t(this),i=new String(n.text).toUpperCase();""==i&&(i=new String(e.html()).toUpperCase());for(var r=i.length,a=0,o=i.length;o>a;a++){var h=i.charAt(a);n.charsMap.indexOf(h)<0&&(i=i.replace(h,n.charSubstitute))}if(n.textEqual&&""!=n.textInit){var c=n.textInit.toUpperCase();i.length<c.length&&(c=c.substr(0,i.length),1==n.textDots&&(c=c.slice(0,-3)+"..."));var l=c.length}else var c=n.textInit.toUpperCase(),l=c.length;for(var a=0,o=c.length;o>a;a++){var h=c.charAt(a);n.charsMap.indexOf(h)<0&&(c=c.replace(h,n.charSubstitute))}if(c.length<i.length)for(;c.length<i.length;)c+=""!=n.textFill&&""!=n.textInit?n.textFill:n.charsMap.charAt(Math.floor(n.charsMap.length*Math.random()));else for(;i.length<c.length;)i+=""!=n.textFill?n.textFill:n.charsMap.charAt(Math.floor(n.charsMap.length*Math.random()));var d=new s(n);d.build(i.length,e),e.empty().append(d.getDOMObject()),this.splitflap=d,n.delay>0?(n.autoplay=!0,d.delayText(i,c),setTimeout(function(){d.setText(i,c,!0),n.restart&&e.off().on("mousedown touchend",function(){d.delayText(i,c),setTimeout(function(){d.setText(i,c,!0)},n.delay)})},n.delay)):(d.setText(i,c,!1),0==n.autoplay?e.on("mousedown touchend",function(){n.autoplay=!0,e.TS_VCSC_SplitFlap("splitflap").animate(),e.off().on("mousedown touchend",function(){d.setText(i,c,!1)})}):n.restart&&e.on("mousedown touchend",function(){d.setText(i,c,!1)})),jQuery(window).on("debouncedresize",function(){var t=e.width(),s=Math.floor(t/n.charWidth),i=e.find(".ts-splitflap-letters"),a=r>=l?r:l;i.width(a*n.charWidth<t?a*n.charWidth:s>a?a*n.charWidth:s*n.charWidth)})})}}(jQuery);