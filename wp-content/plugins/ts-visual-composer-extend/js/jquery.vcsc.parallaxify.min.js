!function(t,e,i,a){function r(e,i){this.element=e,this.options=t.extend({},o,i),this._defaults=o,this._name=s,this.init()}var s="parallaxify",n=30,o={positionProperty:"position",horizontalParallax:!0,verticalParallax:!0,parallaxBackgrounds:!0,parallaxElements:!0,responsive:!1,useMouseMove:!0,useGyroscope:!0,alphaFilter:.9,motionType:"natural",mouseMotionType:"gaussian",inputPriority:"mouse",motionAngleX:80,motionAngleY:80,adjustBasePosition:!0,alphaPosition:.05},l={position:{setLeft:function(t,e){t.css("left",e)},setTop:function(t,e){t.css("top",e)}},transform:{setPosition:function(t,e,i,a,r){t[0].style[f]="translate3d("+(e-i)+"px, "+(a-r)+"px, 0)"}}},u=function(t,e){return 1/(1+Math.exp(-(.07056*e*(3^t))-1.5976*e*t))},d=function(t,e,i){return null===e?t:("undefined"==typeof i&&(i=.5),i*t+(1-i)*e)},c=[],h={linear:function(t,e){return-e>=t?1:t>=e?-1:-t/e},natural:function(t,e){return-e>=t?1:t>=e?-1:(c["n"+e]===a&&(c["n"+e]=Math.tan(.01745*e)),-Math.tan(.01745*t)/c["n"+e])},performance:function(t,e){return-e>=t?1:t>=e?-1:(c["p"+e]===a&&(c["p"+e]=e/90+4.2*Math.pow(e/90,7)),-(t/90+4.2*Math.pow(t/90,7))/c["p"+e])},gaussian:function(t,e){return 1-2*u(t/90,135/e)}},p=function(){var e,i=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/,a=t("script")[0].style,r="";for(e in a)if(i.test(e)){r=e.match(i)[0];break}return"WebkitOpacity"in a&&(r="Webkit"),"KhtmlOpacity"in a&&(r="Khtml"),function(t){return r+(r.length>0?t.charAt(0).toUpperCase()+t.slice(1):t)}}(),f=p("transform"),m=t("<div />",{style:"background:#fff"}).css("background-position-x")!==a,y=m?function(t,e,i){t.css({"background-position-x":e,"background-position-y":i})}:function(t,e,i){t.css("background-position",e+" "+i)},g=m?function(t){return[t.css("background-position-x"),t.css("background-position-y")]}:function(t){return t.css("background-position").split(" ")},v=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){setTimeout(t,1e3/n)};r.prototype={init:function(){this.options.name=s+"_"+Math.floor(1e9*Math.random()),this.tilt={beta:0,gamma:0},this._defineElements(),this._defineGetters(),this._defineSetters(),this._detectMobile(),this._detectMotionType(),this._detectViewport(),this._handleWindowLoadAndResize(),this.refresh({firstLoad:!0}),this._startAnimation()},_defineElements:function(){this.$element=this.element===i.body||this.element===e?t("body"):t(this.element),this.$viewportElement=t(e)},_defineGetters:function(){var t=this,e=h[t.options.motionType],i=h[t.options.mouseMotionType];this._getMoveHorizontal=function(){if(this.useMouseMove&&null!==this.clientX&&this.clientX!==this.oldClientX)return i(this.options.motionAngleX*(1-2*this.clientX/this.viewportWidth),this.options.motionAngleX);if(this.useSensor&&null!==this.beta&&null!==this.gamma){var t=this.tilt;return this.viewportLandscape?this.viewportFlipped?e(-t.beta,this.options.motionAngleX):e(t.beta,this.options.motionAngleX):this.viewportFlipped?e(-t.gamma,this.options.motionAngleX):e(t.gamma,this.options.motionAngleX)}return this.useSensor=!1,i(this.options.motionAngleX*(1-2*this.oldClientX/this.viewportWidth),this.options.motionAngleX)},this._getMoveVertical=function(){if(this.options.useMouseMove&&null!==this.clientY&&this.clientY!==this.oldClientY)return i(this.options.motionAngleY*(1-2*this.clientY/this.viewportHeight),this.options.motionAngleY);if(this.useSensor&&null!==this.beta&&null!==this.gamma){var t=this.tilt;return this.viewportLandscape?this.viewportFlipped?e(-t.gamma,this.options.motionAngleY):e(t.gamma,this.options.motionAngleY):this.viewportFlipped?e(-t.beta,this.options.motionAngleY):e(t.beta,this.options.motionAngleY)}return this.useSensor=!1,i(this.options.motionAngleY*(1-2*this.oldClientY/this.viewportHeight),this.options.motionAngleY)}},_defineSetters:function(){var t=this,e=l[t.options.positionProperty];this._setPosition=e.setPosition||function(i,a,r,s,n){t.options.horizontalParallax&&e.setLeft(i,a,r),t.options.verticalParallax&&e.setTop(i,s,n)}},refresh:function(i){i&&i.firstLoad||this._reset(),this._findElements(),this._findBackgrounds(),i&&i.firstLoad&&/WebKit/.test(navigator.userAgent)&&t(e).load(function(){var e=t("body");oldLeft=e.scrollLeft(),oldTop=e.scrollTop(),e.scrollLeft(oldLeft+1),e.scrollTop(oldTop+1),e.scrollLeft(oldLeft),e.scrollTop(oldTop)})},_detectViewport:function(){this.viewportWidth=this.$viewportElement.width(),this.viewportHeight=this.$viewportElement.height(),this.useSensor&&(this.viewportFlipped=180===e.orientation,this.viewportLandscape=90===Math.abs(e.orientation))},_detectMobile:function(){var t=navigator.userAgent||navigator.vendor||e.opera;this.isMobile=/(bb\d+|meego).+mobile|android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|playbook|plucker|pocket|psp|series(4|6)0|silk|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))},_detectMotionType:function(){this.useSensor=!1,this.useSensorWebkit=!1,this.useSensorMoz=!1,this.useMouseMove=!1,this.options.useGyroscope&&(this.isMobile||"gyroscope"===this.options.inputPriority)&&(this.useSensorWebkit=e.DeviceOrientationEvent!==a,this.useSensorMoz=e.OrientationEvent!==a,this.useSensor=this.useSensorWebkit||this.useSensorMoz),this.options.useMouseMove&&!this.isMobile&&(this.useMouseMove=this.$viewportElement.mousemove!==a)},_findElements:function(){var e=this;if(this.elements!==a)for(var i=this.elements.length-1;i>=0;i--)this.elements[i].$element.data("parallaxify-ElementIsActive",a);this.elements=[],this.options.parallaxElements&&this.$element.find("[data-parallaxify-range],[data-parallaxify-range-x],[data-parallaxify-range-y]").each(function(){var i=t(this);if(i.data("parallaxify-ElementIsActive")){if(i.data("parallaxify-ElementIsActive")!==this)return}else i.data("parallaxify-ElementIsActive",this);i.data("parralaxify-originalLeft")?(i.css("left",i.data("parallaxify-originalLeft")),i.css("top",i.data("parallaxify-originalTop"))):(i.data("parallaxify-originalLeft",i.css("left")),i.data("parallaxify-originalTop",i.css("top"))),e.elements.push({$element:i,originalPositionLeft:i.position().left,originalPositionTop:i.position().top,parallaxDistanceX:i.data("parallaxify-range-x")!==a?i.data("parallaxify-range-x"):i.data("parallaxify-range")!==a?i.data("parallaxify-range"):0,parallaxDistanceY:i.data("parallaxify-range-y")!==a?i.data("parallaxify-range-y"):i.data("parallaxify-range")!==a?i.data("parallaxify-range"):0,width:i.outerWidth(!0),height:i.outerHeight(!0)})})},_findBackgrounds:function(){var e,i=this;this.backgrounds=[],this.options.parallaxBackgrounds&&(e=this.$element.find("[data-parallaxify-background-range],[data-parallaxify-background-range-x],[data-parallaxify-background-range-y]"),(this.$element.data("parallaxify-background-range")||this.$element.data("parallaxify-background-range-x")||this.$element.data("parallaxify-background-range-y"))&&(e=e.add(this.$element)),e.each(function(){var e=t(this),r=g(e);if(e.data("parallaxify-backgroundIsActive")){if(e.data("parallaxify-backgroundIsActive")!==this)return}else e.data("parallaxify-backgroundIsActive",this);e.data("parralaxify-backgroundOriginalLeft")?y(e,e.data("parallaxify-backgroundOriginalLeft"),e.data("parallaxify-backgroundOriginalTop")):(e.data("parallaxify-backgroundOriginalLeft",r[0]),e.data("parallaxify-backgroundOriginalTop",r[1])),i.backgrounds.push({$element:e,originalValueLeft:r[0],originalValueTop:r[1],originalBackgroundPositionLeft:isNaN(parseInt(r[0],10))?0:parseInt(r[0],10),originalBackgroundPositionTop:isNaN(parseInt(r[1],10))?0:parseInt(r[1],10),originalPositionLeft:e.position().left,originalPositionTop:e.position().top,parallaxDistanceX:e.data("parallaxify-background-range-x")!==a?e.data("parallaxify-background-range-x"):e.data("parallaxify-background-range")!==a?e.data("parallaxify-background-range"):0,parallaxDistanceY:e.data("parallaxify-background-range-y")!==a?e.data("parallaxify-background-range-y"):e.data("parallaxify-background-range")!==a?e.data("parallaxify-background-range"):0})}))},_reset:function(){var t,e,i,a,r;for(r=this.elements.length-1;r>=0;r--)t=this.elements[r],e=t.$element.data("parallaxify-originalLeft"),i=t.$element.data("parallaxify-originalTop"),this._setPosition(t.$element,e,e,i,i),t.$element.data("parallaxify-originalLeft",null).data("parallaxify-originalLeft",null).data("parallaxify-elementIsActive",null).data("parallaxify-backgroundIsActive",null);for(r=this.backgrounds.length-1;r>=0;r--)a=this.backgrounds[r],a.$element.data("parallaxify-backgroundOriginalLeft",null).data("parallaxify-backgroundOriginalTop",null).data("parallaxify-backgroundIsActive",null),y(a.$element,a.originalValueLeft,a.originalValueTop)},destroy:function(){this._reset(),this.useMouseMove&&this.$viewportElement.unbind("mousemove."+this.name),this.useSensorWebkit&&e.removeEventListener("deviceorientation",this._handleSensorWebkit,!1),this.useSensorMoz&&e.removeEventListener("MozOrientation",this._handleSensorMoz,!1),t(e).unbind("load."+this.name).unbind("resize."+this.name).unbind("orientationchange."+this.name)},_processSensorData:function(){if(this.useSensor){var t=this.beta,e=this.gamma,i=0,r=0;t>90&&(t-=180),e>180&&(e-=360),this.initialBeta===a&&null!==t&&(this.initialBeta=t,this.useSensor&&"gyroscope"===this.options.inputPriority&&(this.useMouseMove=!1,this.useMouseMove&&this.$viewportElement.unbind("mousemove."+this.name))),this.initialGamma===a&&null!==e&&(this.initialGamma=e,this.useSensor&&"gyroscope"===this.options.inputPriority&&(this.useMouseMove=!1,this.useMouseMove&&this.$viewportElement.unbind("mousemove."+this.name))),this.options.adjustBasePosition&&this.initialGamma!==a&&this.initialBeta!==a&&(this.initialGamma=e-this.initialGamma<-180?d(e+360,this.initialGamma,this.options.alphaPosition):e-this.initialGamma>180?d(e-360,this.initialGamma,this.options.alphaPosition):d(e,this.initialGamma,this.options.alphaPosition),this.initialBeta=t-this.initialBeta<-90?d(t+180,this.initialBeta,this.options.alphaPosition):t-this.initialBeta>90?d(t-180,this.initialBeta,this.options.alphaPosition):d(t,this.initialBeta,this.options.alphaPosition)),i=this.initialBeta!==a?t-this.initialBeta:t,r=this.initialGamma!==a?e-this.initialGamma:e,i>100?i-=180:-100>i&&(i+=180),r>200?r-=360:-200>r&&(r+=360),i=d(i,this.tilt.beta,this.options.alphaFilter),r=d(r,this.tilt.gamma,this.options.alphaFilter),this.tilt.beta=i,this.tilt.gamma=r}},_repositionElements:function(){var t,e,i,a,r,s,n,o=this._getMoveHorizontal(),l=this._getMoveVertical();if(this.currentMoveHorizontal!==o||this.currentMoveVertical!==l||this.currentWidth!==this.viewportWidth||this.currentHeight!==this.viewportHeight){for(this.currentMoveHorizontal=o,this.currentMoveVertical=l,this.currentWidth=this.viewportWidth,this.currentHeight=this.viewportHeight,n=this.elements.length-1;n>=0;n--)t=this.elements[n],elementAdjustX=Math.floor(t.parallaxDistanceX/2),elementAdjustY=Math.floor(t.parallaxDistanceY/2),r=this.options.horizontalParallax?Math.floor(o*t.parallaxDistanceX/2)+t.originalPositionLeft-elementAdjustX:t.originalPositionLeft,s=this.options.verticalParallax?Math.floor(l*t.parallaxDistanceY/2)+t.originalPositionTop-elementAdjustY:t.originalPositionTop,this._setPosition(t.$element,r,t.originalPositionLeft,s,t.originalPositionTop);for(n=this.backgrounds.length-1;n>=0;n--)e=this.backgrounds[n],leftAdjust=Math.floor(e.parallaxDistanceX/2),rightAdjust=Math.floor(e.parallaxDistanceY/2),i=this.options.horizontalParallax?Math.floor(o*e.parallaxDistanceX/2)+e.originalBackgroundPositionLeft-leftAdjust+"px":e.originalValueLeft,a=this.options.verticalParallax?Math.floor(l*e.parallaxDistanceY/2)+e.originalBackgroundPositionTop-rightAdjust+"px":e.originalValueTop,y(e.$element,i,a)}},_handleWindowLoadAndResize:function(){var i=this,a=t(e);i.options.responsive&&a.bind("load."+this.name,function(){i.refresh()}),a.bind("resize."+this.name,function(){i._detectViewport(),i.options.responsive&&i.refresh()}),a.bind("orientationchange."+this.name,function(){i._detectViewport(),i.options.responsive&&i.refresh()})},_startAnimation:function(){var t=this,i=!1;this.beta=0,this.gamma=0,this.clientX=this.oldClientX=Math.round(t.viewportWidth/2),this.clientY=this.oldClientY=Math.round(t.viewportHeight/2);var r=function(){t._processSensorData(),t._repositionElements(),i=!1},s=function(){i||(v(r),i=!0)};this._handleSensorWebkit=function(e){t.gamma=e.gamma,t.beta=e.beta,s()},this._handleSensorMoz=function(e){t.gamma=180*e.x,t.beta=-90*e.y,s()},this._handleMouseMove=function(e){t.oldClientX=t.clientX,t.oldClientY=t.clientY,t.clientX=e.clientX!==a?e.clientX:e.pageX,t.clientY=e.clientY!==a?e.clientY:e.pageY,s()},this.useSensorWebkit?e.addEventListener("deviceorientation",t._handleSensorWebkit,!1):this.useSensorMoz&&e.addEventListener("MozOrientation",t._handleSensorMoz,!1),this.useMouseMove&&this.$viewportElement.bind("mousemove."+this.name,t._handleMouseMove),s()}},t.fn[s]=function(e){var i=arguments;return e===a||"object"==typeof e?this.each(function(){t.data(this,"plugin_"+s)||t.data(this,"plugin_"+s,new r(this,e))}):"string"==typeof e&&"_"!==e[0]&&"init"!==e?this.each(function(){var a=t.data(this,"plugin_"+s);a instanceof r&&"function"==typeof a[e]&&a[e].apply(a,Array.prototype.slice.call(i,1)),"destroy"===e&&t.data(this,"plugin_"+s,null)}):void 0},t[s]=function(){var i=t(e);return i[s].apply(i,Array.prototype.slice.call(arguments,0))},t[s].positionProperty=l,t[s].motionType=h,e[s]=r}(jQuery,this,document);