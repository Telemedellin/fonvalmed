!function(t,e){t.fn.mousewheel=function(n){var a,i=t(this),r=["DOMMouseScroll","mousewheel"],o="EventListener",s=function(t){return t=t||window.event,n(t,t.wheelDelta?t.wheelDelta/120:t.detail/3),t.preventDefault(),!1};i.on("mouseover mouseout",function(t){for(var n in r)t.target[t.target["add"+o]!==e?((a="mouseout"==t.type)?"remove":"add")+o:(a?"attach":"detach")+"Event"](r[n],s,!1)})}}(jQuery),function(t,e){"use strict";var n={mode:"continuous",thumbs:$TS_VCSC_Lightbox_Thumbs,thumbsize:$TS_VCSC_Lightbox_Thumbsize,scheme:$TS_VCSC_Lightbox_Scheme,theme:"metro",size:"960,540",play:!0,autoplay:!1,closer:$TS_VCSC_Lightbox_Closer,share:$TS_VCSC_Lightbox_Share,social:$TS_VCSC_Lightbox_Social,duration:4e3,keyboard:$TS_VCSC_Lightbox_Keyboard,fullscreen:$TS_VCSC_Lightbox_FullScreen,margin:10,zoom:$TS_VCSC_Lightbox_Zoom,fxspeed:$TS_VCSC_Lightbox_FXSpeed,grid:0,gridspace:4,gridorder:!0,captions:$TS_VCSC_Lightbox_Captions,gridfilter:!1,random:"",gridavailable:"Available Groups",gridselected:"Filtered Groups",gridnogroups:"No Groups",gridtoggle:"Toggle Filter",gridtogglestyle:"",gridshowall:"Show All",gridshowallstyle:"",info:!1,backlight:$TS_VCSC_Lightbox_Backlight,usecolor:$TS_VCSC_Lightbox_UseColor,animation:$TS_VCSC_Lightbox_Animation,cors:$TS_VCSC_Lightbox_CORS,hashpath:"composer/",bgclose:$TS_VCSC_Lightbox_BGClose,notouch:$TS_VCSC_Lightbox_NoTouch,nohashes:$TS_VCSC_Lightbox_NoHashes,tapping:$TS_VCSC_Lightbox_Tapping,overlay:$TS_VCSC_Lightbox_Overlay,background:$TS_VCSC_Lightbox_Background,repeat:$TS_VCSC_Lightbox_Repeat,noise:$TS_VCSC_Lightbox_Noise},a={title:!1,type:!1,thumbnail:"",contenttype:"video",listid:"",videofirst:"",videosother:"",userid:"",search:"",groups:!1,videoplay:!1,related:!1,loop:!1,modest:!1,infobar:!0,controls:1,autohide:1,start:"",end:"",nohashes:$TS_VCSC_Lightbox_NoHashes,rel:!1,src:!1,href:!1,width:0,height:0,color:!1,effect:!1},i={},r={light:!1,current:!1,scrollbar:!0,all:{},phase:!0,css3:window.nchcss3,hash:"",isTouchDevice:!1,ns:t({}),event:{trigger:function(){r.ns.trigger.apply(r.ns,arguments)},on:function(){r.ns.on.apply(r.ns,arguments)},off:function(){r.ns.off.apply(r.ns,arguments)}},canFS:!1,onload:!1},o={},s={open:function(t){t.group.main.fadeIn(300)},close:function(t){var e;t.main.fadeOut(300),d.pause(!1);for(var n in t.set)(e=t.set[n].thumb)&&(e.className="")},slideOut:function(t,a){var i=d.getFX(t.opts.effect,t),o=t.group,s=o.css3,l=o.blocks.preview,c=r.phase?-1:1,h=i(0,0,0,1)!==e,u=function(t){return(h?i(0,0,0,t):t)+r.wsize};i(s,c,!0),l.stop().animate({scrollLeft:u(-c*r.wsize)},{duration:n.fxspeed,complete:function(){o.blocks.media.css("visibility","hidden"),i(s,0),a()}}),t.thumb!==e&&(t.thumb.className="")},slideIn:function(t,a){a=a===e?function(){}:a;var i=d.getFX(t.opts.effect,t),o=t.group,s=o.css3,l=o.blocks.preview,c=r.phase?1:-1,h=i(0,0,0,1)!==e,u=function(t){return(h?i(0,0,0,t):t)+r.wsize};i(s,c),o.blocks.media.css("visibility","visible"),s.el.offsetHeight+1,i(s,0,!0),o.blocks.media.css("visibility","visible"),l.stop().scrollLeft(u(-c*r.wsize)).animate({scrollLeft:u(0)},n.fxspeed,function(){l.scrollLeft(u(0))})}},l={youtube:{is:function(t){var e=t.opts.href.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/);return e?(t.opts.size||(t.opts.size=t.group.opts.size),t.opts.videoid=e[1],!0):!1},create:function(t){if("true"==t.opts.related)var e="rel=1";else var e="rel=0";if("true"==t.opts.loop)var n="&loop=1",a="&playlist="+t.opts.videoid;else var n="&loop=0",a="";if("true"==t.opts.videoplay)var i="&autoplay=1";else var i="&autoplay=0";if("true"==t.opts.infobar)var r="&showinfo=1";else var r="&showinfo=0";if("true"==t.opts.modest)var o="&modestbranding=1";else var o="&modestbranding=0";var s="&controls="+t.opts.controls,l="&autohide="+t.opts.autohide;if(""!=t.opts.start&&parseInt(t.opts.start)>0)var c="&start="+t.opts.start;else var c="";if(""!=t.opts.end&&parseInt(t.opts.end)>0&&parseInt(t.opts.end)>parseInt(t.opts.start))var h="&end="+t.opts.end;else var h="";if("https:"==document.location.protocol)var d="https:";else var d="http:";return"video"==t.opts.contenttype?'<iframe class="nch-lb-iframe nch-video-youtube" src="'+d+"//www.youtube.com/embed/"+t.opts.videoid+"?"+e+n+a+r+o+c+h+i+s+l+'&wmode=opaque" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowfullscreen></iframe>':"playlist"==t.opts.contenttype?'<iframe class="nch-lb-iframe nch-video-youtube" src="'+d+"//www.youtube.com/embed?listType=playlist&list="+t.opts.listid+r+"&"+e+n+o+i+s+l+'&wmode=opaque" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowfullscreen></iframe>':"searchterm"==t.opts.contenttype?'<iframe class="nch-lb-iframe nch-video-youtube" src="'+d+"//www.youtube.com/embed?listType=search&list="+t.opts.search+r+"&"+e+n+o+i+s+l+'&wmode=opaque" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowfullscreen></iframe>':"combination"==t.opts.contenttype?'<iframe class="nch-lb-iframe nch-video-youtube" src="'+d+"//www.youtube.com/embed/"+t.opts.videofirst+"?playlist="+t.opts.videosother+r+"&"+e+n+o+i+s+l+'&wmode=opaque" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowfullscreen></iframe>':"uploads"==t.opts.contenttype?'<iframe class="nch-lb-iframe nch-video-youtube" src="'+d+"//www.youtube.com/embed?listType=user_uploads&list="+t.opts.userid+r+"&"+e+n+o+i+s+l+'&wmode=opaque" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowfullscreen></iframe>':""},thumb:function(t,e){d.loadThumb.call(t,t.opts.src="//img.youtube.com/vi/"+t.opts.videoid+"/hqdefault.jpg",e)},video:!0},vimeo:{is:function(t){var e=t.opts.href.match(/(http|https):\/\/(?:www.)?(?:(vimeo).com)\/(.*)/);return e?(t.opts.videoid=e[3],t.opts.size||(t.opts.size=t.group.opts.size),!0):!1},create:function(t){if("https:"==document.location.protocol)var e="https:";else var e="http:";return"true"==t.opts.videoplay?'<iframe class="nch-lb-iframe nch-video-vimeo" src="'+e+"//player.vimeo.com/video/"+t.opts.videoid+'?autoplay=1" width="500" height="500" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>':'<iframe class="nch-lb-iframe nch-video-vimeo" src="'+e+"//player.vimeo.com/video/"+t.opts.videoid+'?autoplay=0" width="500" height="500" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'},thumb:function(e,n){t.getJSON("//vimeo.com/api/v2/video/"+e.opts.videoid+".json?callback=?",{format:"json"},function(t){d.loadThumb.call(e,e.opts.src=t[0].thumbnail_large,n)})},video:!0},dailymotion:{is:function(t){var n=t.opts.href.match(/^.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/);return null!==n?(t.opts.videoid=n[4]!==e?n[4]:n[2],t.opts.size||(t.opts.size=t.group.opts.size),!0):!1},create:function(t){if("https:"==document.location.protocol)var e="https:";else var e="http:";if("true"==t.opts.videoplay)var n="autoplay=1";else var n="autoplay=0";if("true"==t.opts.related)var a="&related=1";else var a="&related=0";return'<iframe class="nch-lb-iframe nch-video-dailymotion" src="'+e+"//www.dailymotion.com/embed/video/"+t.opts.videoid+"?"+n+a+'&forcedQuality=hq" width="500" height="500" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'},thumb:function(t,e){d.loadThumb.call(t,t.opts.src="//www.dailymotion.com/thumbnail/video/"+t.opts.videoid,e)},video:!0},html:{is:function(t){return t.opts.href=t.opts.href.replace(window.location,""),"#"==t.opts.href.charAt(0)||"."==t.opts.href.charAt(0)},create:function(e){return t(e.opts.href).show().get(0)}},video:{is:function(t){return t.opts.href=t.opts.href.replace(window.location,""),"#"==t.opts.href.charAt(0)||"."==t.opts.href.charAt(0)},create:function(e){return t(e.opts.href).show().get(0)}},ajax:{is:function(t){return t.opts.href.search(/^https?:\/\//i)<0},create:function(e,n){t.ajax({url:e.opts.href,success:n})}},iframe:{is:function(){return!0},create:function(t){return'<iframe class="nch-lb-iframe" src="'+t.opts.href+'" frameBorder="0"></iframe>'}}},c={init:function(i){var o=arguments,s=t(this);if(0==s.length){if(i===e)return s;i.length===e&&1==o.length?t.extend(n,i):(s=d.setFrom.apply(this,[i.charAt!==e?[i]:i,o[1]||{}]),(o[1]||{}).open===e&&c.open.call(s))}else i=i||{},s.each(function(n,o){var s,l=t(o),c=l.is("img")?l:t("img",l);if("true"==l.attr("data-lightbox-init"))return!0;if(s=t.extend({},a,d.getDataProperties(l,{rel:"rel",title:"title",href:"href"})),c.length>0?(s.src=c.attr("src"),s.thumbnail="undefined"!=typeof l.attr("data-thumbnail")&&""!=l.attr("data-thumbnail")?l.attr("data-thumbnail"):""):"undefined"!=typeof l.attr("data-thumbnail")&&""!=l.attr("data-thumbnail")&&(s.src=l.attr("data-thumbnail"),s.thumbnail=l.attr("data-thumbnail")),l.attr("data-lightbox-init","true"),(l.is("a")||0==c.length)&&(c=l),s.rel)r.all[s.rel]===e&&(r.all[s.rel]=new d.mediaGroup(i,s.rel)),r.all[s.rel].add(c,s);else{var h=new d.mediaGroup(i);h.add(c,s),r.all[h.name]=h}});for(var l in r.all)d.renderGrid(r.all[l]);return s},open:function(a){var i,o=t(this);if(a!==e&&r.all[a]!==e&&(i=r.all[a].set[0]),o.data("nch-lb-media")!==e)i=o.data("nch-lb-media");else if(this.jquery)return c.init.apply(this,arguments),c.open.call(this);i&&(r.event.trigger("open",i.group),r.hash="#"+n.hashpath+i.opts.hash,"false"==i.opts.nohashes||0==i.opts.nohashes?window.location.hash=r.hash:"true"==i.opts.nohashes||1==i.opts.nohashes?n.nohashes=!0:n.nohashes||(window.location.hash=r.hash)),r.scrollpos=r.w.scrollTop(),r.doc.addClass("nch-lb-noscroll")},next:function(t){if(r.current){var a=r.current,i=a.set.length,o=a.current,s=a.set[o+1==i?0:o+1];1!=i&&(r.hash="#"+n.hashpath+s.opts.hash,"false"==s.opts.nohashes||0==s.opts.nohashes?window.location.hash=r.hash:"true"==s.opts.nohashes||1==s.opts.nohashes?n.nohashes=!0:n.nohashes||(window.location.hash=r.hash),d.pause(t===e),r.phase=!0,r.event.trigger("next",[r.current,s]))}},previous:function(){if(r.current){var t=r.current,e=t.set.length,a=t.current,i=t.set[0==a?e-1:a-1];1!=e&&(r.hash="#"+n.hashpath+i.opts.hash,"false"==i.opts.nohashes||0==i.opts.nohashes?window.location.hash=r.hash:"true"==i.opts.nohashes||1==i.opts.nohashes?n.nohashes=!0:n.nohashes||(window.location.hash=r.hash),d.pause(!1),r.phase=!1,r.event.trigger("previous",[r.current,i]))}},close:function(){if(r.current){var t=r.current;r.hash="",window.location.hash="",history&&history.pushState&&history.pushState("",document.title,window.location.pathname+window.location.search),t.playing&&c.play(),d.fs.on&&d.fs.toggle(),d.detachMedia(t.set[t.current]),r.event.trigger("close",t),s.close(t),r.current.paused=!1,r.current=t.current=!1,r.doc.removeClass("nch-lb-noscroll"),"none"!=$TS_VCSC_Lightbox_ScrollBlock&&window.setTimeout(function(){r.w.scrollTop(r.scrollpos)},10)}},fx:function(n,a){a===e?t.extend(o,n):o[n]=a},access:function(t,n){return t!==e&&(d[t]=n),d},play:function(t){var n=r.current,a=n.opts,i=n.main,o=n.blocks.loading,s=n.playing,l=a.duration;if(a.play)return t===e&&s?s:(i.toggleClass("nch-lb-playing"),i.find(".nch-lb-icon-play").html(s?"p":"s"),s?o.stop():o.animate({width:i.width()},{easing:"linear",duration:(1-o.width()/i.width())*l,complete:function(){n.paused=!0,c.next()}}),t!==!1&&r.event.trigger(s?"stop":"play",n),n.playing=!s)},stop:function(){return r.current.playing&&c.play(!0),!1},info:function(){return r.current?d.toggleInfo.apply({},arguments):void 0},addEvent:function(t,e){r.event.on(t,e)},removeEvent:function(t,e){r.event.off(t,e)},getGroupName:function(){var n,a=t(this),i=!1;return a.length>0&&(n=t(a.get(0)).data("nch-lb-media"))!==e?n.group.name:i},getMediaId:function(){var n,a=t(this),i=!1;return a.length>0&&(n=t(a.get(0)).data("nch-lb-media"))!==e?n.opts.hash:i}},h="",d={toggleInfo:function(t){var n=r.current,a=n.blocks,i=a.info.children(".nch-lb-info-panel");return t!==e&&n.about==t?t:(a.info["fade"+(n.about?"Out":"In")](400),i.append(n.info.show()),r.event.trigger((n.about?"close":"open")+"_info",[n]),n.about=!n.about)},selectThumb:function(n){var a,i=n.thumb,r=n.group,o=r.blocks,s=0,l=t(i),c=l.parent(),h=c.prev().find("img").get(0),d=c.next().find("img").get(0);if(i!==e&&r.opts.thumbs){for(var u in r.set)(a=r.set[u].thumb)&&(a.className="");var p,f,g,m=(i.className="nch-lb-thumb-s",r.opts),v={top:1,bottom:1,left:0,right:0}[m.thumbs],b=o.bthumbs,w=(o.thumbs,b[v?"width":"height"]()),y=v?"left":"top",x="offset"+(v?"Width":"Height"),k={};s=b[f="scroll"+y.substr(0,1).toUpperCase()+y.substr(1)](),g=l.position()[y];var C=g-4,S=g+(p=i[x])+4;h!==e&&(C-=h[x]+4),d!==e&&(S+=d[x]+4),S-C>w?k[f]=g+i[x]/2-w/2:s>C?k[f]=C:S-w>s&&(k[f]=S-w),b.animate(k,200)}},scrollThumbs:function(t,e){var n,a=r.current,i=a.opts,o=i.thumbs,s={left:"Top",top:"Left",right:"Top",bottom:"Left"};a&&o&&(n=a.blocks.bthumbs,n["scroll"+s[o]](n["scroll"+s[o]]()+120*e))},swipeGesture:function(a){function i(t){return(h=t.gesture)?(u=h.deltaX,void(((p=Math.abs(u))>25||g)&&(g=!0,f.stop().scrollLeft(x(-u)),w(b,u/r.wsize)))):!1}function o(){var t=r.current.set.length,e=r.current.current;p>m&&t>1&&("linear"==r.current.opts.mode?!(0==e&&u/p>0||e==t-1&&0>u/p):1)?(s=u>0?0:2*r.wsize,f.animate({scrollLeft:x(s-r.wsize)},n.fxspeed,function(){c[0>u/p?"next":"previous"](!0)}),w(b,u/p,!0)):(f.stop().animate({scrollLeft:x(0)},n.fxspeed),w(b,0,!0)),f.off("drag",i).off("dragend",o)}if(a.gesture===e)return!1;if(r.isTouchDevice||(r.isTouchDevice=!(a.gesture.srcEvent.changedTouches===e)),r.zooming||!r.current||a.gesture===e)return!0;var s,l,h,u,p,f=t(this),g=(t(a.target),a.timeStamp,!1),m=r.wsize/3,v=r.current,b=v.css3,w=d.getFX(v.set[v.current].opts.effect,v.set[v.current]),y=w(0,0,0,1)!==e,x=function(t){return(y?w(0,0,0,t):t)+r.wsize};return l=a.gesture,f.on("drag",i).on("dragend",o),!1},useTouch:function(t){t.hammer({prevent_default:!0}).on("dragstart",d.swipeGesture)},disableTouch:function(t){t.hammer({prevent_default:!1}).off("dragStart",d.swipeGesture)},pause:function(t){r.current.playing&&!r.current.paused&&((t===!0||"mouseover"==t.type)&&(r.current.paused=!0),c.play(!1))},resume:function(){!r.current.playing&&r.current.paused&&(c.play(!1),r.current.paused=!1)},openShare:function(e){if(r.current){var n,a=r.current,i=a.current,o=a.set[i];"nch-lb-icon-share"==e.target.className?o.share&&"block"==o.share.css("display")?(o.share.hide(),a.main.removeClass("nch-lb-sharing")):(a.main.addClass("nch-lb-sharing"),o.share||(o.share=n=t('<div class="nch-lb-share-btns"></div>').appendTo(t("li.nch-lb-share",a.blocks.menu)),d.shareButtons(n,a.opts.social,d.getMediaProperties(o))),o.share.show()):o.share&&(o.share.hide(),a.main.removeClass("nch-lb-sharing"))}},renderGrid:function(n){var a,i,r,o,s=n.opts,l=n.set,h=!1,u=[];if(s.grid&&!n.hasGrid){n.hasGrid=!0;var p=[],f=0,g=s.random;a=s.grid.split(",");for(var m in a)a[m]=parseInt(a[m]);d.need(n.set,d.getPreview,function(){for(var n in l)if(l[n].preview!==e&&(i=l[n].main.hide(),h||(h=i),"true"==l[n].opts.include)){if(r=t(l[n].preview).clone(!0).data("nch-lb-media",l[n]).click(c.open).get(0),r.title=l[n].opts.title?l[n].opts.title:"",r.groups=l[n].opts.groups?l[n].opts.groups:"",r.thumbnail=l[n].opts.thumbnail?l[n].opts.thumbnail:"",""!=r.groups){var d=r.groups.split(",");d.forEach(function(e){t.inArray(e,p)<0&&p.push(e)})}else f++;u.push(r)}if(p.length>0&&"true"==s.gridfilter){p.sort();var m=(t('<div id="nch-lb-toggle-'+g+'" class="nch-lb-toggle '+s.gridtogglestyle+'" data-grid="nch-lb-grid-'+g+'" data-filter="nch-lb-filter-'+g+'" data-showall="nch-lb-showall-'+g+'" data-random="'+g+'">'+s.gridtoggle+"</div>").insertBefore(h),t('<div id="nch-lb-showall-'+g+'" class="nch-lb-showall '+s.gridshowallstyle+'" data-grid="nch-lb-grid-'+g+'" data-filter="nch-lb-filter-'+g+'" data-random="'+g+'">'+s.gridshowall+"</div>").insertBefore(h),t('<select id="nch-lb-filter-'+g+'" class="nch-lb-filter" data-grid="nch-lb-grid-'+g+'" data-toggle="nch-lb-toggle-'+g+'" data-showall="nch-lb-showall-'+g+'" data-random="'+g+'" multiple="multiple"></select>').insertBefore(h));p.forEach(function(e){t('<option value="'+e+'">'+e+"</option>").appendTo(m)}),f>0&&t('<option value="NoGroups">'+s.gridnogroups+"</option>").appendTo(m)}t('<div id="nch-lb-grid-'+g+'" class="nch-lb-grid" data-filter="nch-lb-filter-'+g+'" data-toggle="nch-lb-toggle-'+g+'" data-random="'+g+'"></div>').insertAfter(h).append(o=t(u)),o.nchgrid({grid:a,margin:parseInt(s.gridspace),order:"true"==s.gridorder?!0:!1,captions:"true"==s.captions?!0:!1,linkGrid:!1,filter:"true"==s.gridfilter?!0:!1,random:s.random,selector:"nch-lb-filter-"+g,toggle:"nch-lb-toggle-"+g,showall:"nch-lb-showall-"+g,textAvailable:s.gridavailable,textSelected:s.gridselected,textNoGroups:s.gridnogroups,textToggle:s.gridtoggle,textToggleStyle:s.gridtogglestyle,textShowAll:s.gridshowall,textShowAllStyle:s.gridshowallstyle})})}},parseColor:function(t){for(var e,n=(t+"").split(/bg|\_|\-|\.|\&|\#/),a=0;a<n.length;a++)if((6==(e=n[a].length)||3==e)&&new RegExp("[a-f0-9]{"+e+"}").test(n[a]))return"#"+n[a];return!1},toggleZoom:function(){{var e=r.current,n=e.main,a="nch-lb-zooming",i=e.set[e.current];i.nsize}if(n.hasClass(a))r.zooming=!1,d.updateMediaLayout(i),e.blocks.zoom.find(".nch-lb-zoom-container").remove();else{r.zooming=!0;var o,s=new Image;s.onload=function(){o=d.pinch.call(t(s),"100%","100%").css({position:"absolute"}).addClass("nch-lb-zoom-container"),e.blocks.zoom.append(o)},s.src=i.target.src}n.toggleClass(a)},getMediaProperties:function(t){var e=t.opts,n=e.type,a={title:e.title||document.title,media:"html"!=n&&"ajax"!=n&&"video"!=n?"image"==n||"iframe"==n?t.target.src:e.href:""};return a.url=l[n]&&l[n].video||"iframe"==n?a.media:window.location.href,a},detachMedia:function(e){var n=e.group,a=n.main;t(".nch-lb-title",a).each(function(){t(this).html("")}),t(e.target).detach()},getInnerHeight:function(t,e){t.css({width:e,height:"auto"});var n=t.height();return t.css({height:"auto"}),n},getInnerWidth:function(t,e){t.css({height:e,width:1});var n=t[0].scrollWidth;return t.css({width:"auto"}),n},renderMedia:function(e){function n(n){e.html=n,e.target=t(n)[0],a()}function a(){p.attr("class","nch-lb-media").addClass("nch-lb-media-"+f.type).append(e.target),s.paused&&(c.play(!1),c.play(!1),s.paused=!1),d.updateMediaLayout(e)}var i,o,s=r.current,h=s.main,u=s.blocks,p=u.media,f=e.opts,g=f.type;t(".nch-lb-title",h).each(function(){t(this).html(f.title)}),u.loading.width(0),e.target?a():l[g]&&l[g].video?(e.target=i=t(l[g].create(e)).get(0),o=function(){a(),this.onload&&(this.onload=function(){})},i.attachEvent?i.attachEvent("onload",o):i.onload=o,r.root.append(i)):"iframe"==g?(e.target=i=t(l[g].create(e)).get(0),a()):("html"==g||"ajax"==g||"video"==g)&&("html"==g||"video"==g?n(l[g].create(e)):l[g].create(e,n))},fitInto:function(t,e,n,a){var i,r,o=t/e,s=n/a;return o>s?(i=n>t?t:n,r=i/o):(r=a>e?e:a,i=r*o),[i,r]},updateMediaLayout:function(e){var n,a,i,o,s=!1,c=r.current,h=c.blocks,u=(h.preview,h.media),p=c.mspace.width,f=c.mspace.height,g=e.opts,m=g.type,v={top:0,left:0,width:0,height:0},b=e.nsize;if(r.zooming)return!0;if(l[m]&&l[m].video&&(b=e.nsize=e.group.opts.size.split(",")),o=isNaN(g.width)||isNaN(g.height),"image"==m||l[m]&&l[m].video){var w=b[0]/b[1];0==g.width&&0==g.height?(i=d.fitInto(b[0],b[1],p,f),v.width=i[0],v.height=i[1]):0==g.height?(v.width=p<g.width?p:g.width,v.height=v.width/w>f?(v.width=f*w)/w:v.width/w):0==g.width?(v.height=f<g.height?f:g.height,v.width=v.height*w>p?(v.height=p/w)*w:v.height*w):o||(i=d.fitInto(g.width/1,g.height/1,p,f),v.width=i[0],v.height=i[1])}else"iframe"==m?(0==g.width?v.width=p:o||(v.width=g.width>p?p:g.width),0==g.height?v.height=f:o||(v.height=g.height>f?f:g.height)):("html"==m||"ajax"==m||"video"==m)&&e.target&&(s=!0,g.width>0&&(v.width=g.width>p?p:g.width),g.height>0&&(v.height=g.height>f?f:g.height));if(o&&(g.width/1?v.width=g.width/1:g.height/1&&(v.height=g.height/1),n=isNaN(g.width)?parseFloat(g.width)/100*p:0,a=isNaN(g.height)?parseFloat(g.height)/100*f:0,a&&n?(a||(a=n/b[0]*b[1]),n||(n=a*b[0]/b[1]),i=d.fitInto(n,a,p,f),v.width=i[0],v.height=i[1]):a?n=v.width?v.width:a*b[0]/b[1]:n&&(a=v.height?v.height:n/b[0]*b[1]),i=d.fitInto(n,a,p,f),v.width=i[0],v.height=i[1]),s){v.width||v.height||(v.width=Math.min(p,f));var y=t('<div style="display:block;position:relative;padding:1px"></div>').append(t(e.target).clone()).appendTo(r.root);v.width||(v.width=Math.min(d.getInnerWidth(y,v.height),p)),v.height||(v.height=Math.min(d.getInnerHeight(y,v.width),f)),y.remove()}if(v.top=r.mposy=(f-v.height)/2,v.left=r.wsize+c.mspace.left+(p-v.width)/2,e.group.main[("image"==m&&(b[0]>v.width||b[1]>v.height)&&c.opts.zoom?"add":"remove")+"Class"]("nch-lb-can-zoom"),u.css(v),"iframe"==m||l[m]&&l[m].video){var x=t("iframe.nch-lb-iframe",u);x.height(isNaN(v.height)?"100%":v.height),x.width(isNaN(v.width)?"100%":v.width)}c.opts.notouch||("html"==m||"ajax"==m||"video"==m?c.hasGestures&&(d.disableTouch(h.preview),c.hasGestures=!1):c.hasGestures||(d.useTouch(h.preview),c.hasGestures=!0))},getMediaColor:function(t,e){var a=t.opts;return n.usecolor?e(n.backlight):a.color?e(a.color):void("image"==a.type&&r.hasCanvas?d.getMainColor(t.target,function(t){e("rgb("+t.join(",")+")")}):e(n.backlight))},enoughThumbs:function(t){for(var e=0,n=0;n<t.set.length;n++)t.set[n].opts.src&&e++;return e>1?!0:(t.opts.thumbs=!1,!1)},toMedia:function(e){function n(){e.group.main&&e.group.blocks.media.css({width:0,height:0}),0==e.group.main&&(d.renderLayout(e.group),d.selectThumb(e)),r.current!==e.group?(r.current&&s.close(r.current.group),r.current=e.group,r.current.current=e.index,s.open(e)):l=e.group.current,d.updateLayout(),o===!1?o=!0:o!==!0&&o()}function a(n){e.opts.type=n,r.onload=!1,d.renderMedia(e),d.updateMediaLayout(e),"image"==e.opts.type?((void 0==e.opts.share||"undefined"==e.opts.share)&&(e.opts.share=$TS_VCSC_Lightbox_Share),0==e.opts.share||0==e.opts.share||"false"==e.opts.share?t("li.nch-lb-share > .nch-lb-icon-share").hide():(1==e.opts.share||1==e.opts.share||"true"==e.opts.share)&&t("li.nch-lb-share > .nch-lb-icon-share").show()):void 0!=e.opts.share&&"undefined"!=e.opts.share?0==e.opts.share||0==e.opts.share||"false"==e.opts.share?t("li.nch-lb-share > .nch-lb-icon-share").hide():(1==e.opts.share||1==e.opts.share||"true"==e.opts.share)&&t("li.nch-lb-share > .nch-lb-icon-share").show():t("li.nch-lb-share > .nch-lb-icon-share").hide(),s.slideIn(e,function(){}),d.getMediaColor(e,function(t){function n(){d.light(e.opts.color)}e.opts.color=t,r.light===!1?r.event.on("maskload",n):n()}),r.current.current=e.index}var i,o=!1,l=!1;c.open.call(e),r.onload&&(r.onload.onload=function(){},r.onload=!1),d.enoughThumbs(e.group),r.current&&r.current==e.group&&(l=r.current.current)!==!1&&(r.phase=l&&e.index||l+e.index!=e.group.set.length-1?l<e.index:l>e.index),e.group.main&&d.selectThumb(e),r.zooming&&d.toggleZoom(),r.current?s.slideOut(i=r.current.set[r.current.current],function(){d.detachMedia(i),n()}):n(),d.getMediaType(e,function(t){var e=function(){0!=r.current&&d.detachMedia(r.current.set[r.current.current]),a(t)};o===!0?e():o=e})},renderLayout:function(e){var a,i=e.main=t('<div class="nch-lb-main"></div>').appendTo(r.b),o=e.opts,s="",l={};e.main.addClass("nch-lb-scheme-"+o.scheme),""==n.backlight&&e.main.addClass("nch-lb-no-backlight"),""!=o.overlay&&0!=o.overlay&&""!=o.repeat&&0!=o.repeat?""!=o.overlay&&0!=o.overlay?e.main.css("background",""+o.overlay+' url("'+o.background+'") '+o.repeat+" center center"):e.main.css("background",'#000000 url("'+o.background+'") '+o.repeat+" center center"):""!=o.overlay&&0!=o.overlay&&e.main.css("background",o.overlay),""!=o.noise&&0!=o.noise&&(e.noise=t('<div class="nch-lb-noise"></div>').appendTo(e.main),e.noise.css("background-image","url("+o.noise+")"));l.loadicon=t('<div class="nch-lb-media-loading"></div>').appendTo(i);o.info&&t("#"+o.info).length>0&&0==t("#"+o.info).text().length&&(t("#"+o.info).remove(),o.info=!1),r.canFS&&o.fullscreen&&(s+="nch-lb-can-fs "),o.share&&(s+="nch-lb-can-share "),o.play&&e.set.length>1&&(s+="nch-lb-can-play "),o.zoom&&(s+="nch-lb-can-zoom "),o.info&&(s+="nch-lb-has-info "),r.scrollbar||(s+="nch-lb-no-scrollbar "),i.addClass(s);var h={v:"vertical",h:"horizontal"},u={left:"v",right:"v",top:"h",bottom:"h"},p={v:"width",h:"height"};if(r.asb){var f=l.asb=t('<div class="nch-lb-pngfix"></div>').appendTo(i);d.css3(f).transition("background-color 500ms linear")}o.info&&(e.info=(a=t("#"+o.info)).length?a:t("<div></div>"));var g,m=l.tbar=t('<div class="nch-lb-tbar"></div>').appendTo(i),v=t('<ul class="nch-lb-tbar-controls"></ul>'),b=l.bbar=t('<div class="nch-lb-bar"></div>').appendTo(i),w=l.controls=t('<ul class="nch-lb-controls"></ul>').appendTo(b),y={prev:"left",play:"play",next:"right",title:!1,exit:"exit",fs:"fs",info:"info"},x={prev:"<",play:"p",next:">",title:"",exit:"x",fs:"f",info:"i"};1==e.set.length&&i.addClass("nch-lb-no-more");for(var k in y)w.append(g='<li class="nch-lb-'+k+'">'+(y[k]?'<div class="nch-lb-icon-'+y[k]+'">'+x[k]+"</div>":"")+"</li>"),("exit"==k||"title"==k||"info"==k||"fs"==k)&&v.append(g);if(o.thumbs){var C=l.thumbs=t('<ul class="nch-lb-thumbs"></ul>'),S=l.bthumbs=t('<div class="nch-lb-thumbs-bar"></div>').append(C);if(S.addClass("nch-lb-thumbs-"+o.thumbs).css(o.thumbs,0),C.addClass("nch-lb-thumbs-"+h[u[o.thumbs]]).css(p[u[o.thumbs]],o.thumbsize),"bottom"==o.thumbs?b.append(S):"top"==o.thumbs?m.append(S):i.append(S),"v"==u[o.thumbs]){var _={left:"auto",right:"auto"};_["left"==o.thumbs?"right":"left"]=S[p[u[o.thumbs]]](),m.css(_),b.css(_)}}v.appendTo(m);var T,z=l.preview=t('<div class="nch-lb-media-space"></div>').appendTo(i);if(o.closer){l.scroller=t('<div class="nch-lb-media-scroller"></div>').appendTo(z).append(T=l.media=t('<div class="nch-lb-media"><div class="nch-lb-exit-inner"><div class="nch-lb-icon-exit">x</div></div></div>'))}else{l.scroller=t('<div class="nch-lb-media-scroller"></div>').appendTo(z).append(T=l.media=t('<div class="nch-lb-media"></div>'))}e.css3=d.css3(T);for(var I=l.menu=t('<ul class="nch-lb-photo-menu"></ul>').appendTo(T),L=["zoom","share"],A=["+","h"],k=0;k<L.length;k++)I.append('<li class="nch-lb-'+L[k]+'"><div class="nch-lb-icon-'+L[k]+'">'+A[k]+"</li>");l.info=t('<div class="nch-lb-project"><div class="nch-lb-info-panel"><div class="nch-lb-icon-info">x</div></div></div>').appendTo(i),l.loading=t('<div class="nch-lb-loadbar"></div>').appendTo(i);T.on("mouseover",d.pause).on("mouseout",d.resume),e.blocks=l,o.thumbs&&d.need(e.set,d.getThumbnail,function(){d.renderThumbnails(e)});l.zoom=t('<div class="nch-lb-zoom-space"><div class="nch-lb-icon-zoom">-</div></div>').appendTo(i);o.autoplay&&(e.playing=!0,e.paused=!0,i.addClass("nch-lb-playing")),t("div.nch-lb-icon-fs",i).each(function(){t(this).click(d.fs.toggle)}),t("li.nch-lb-exit",i).each(function(){t(this).click(c.close)}),o.closer&&t(".nch-lb-exit-inner",i).on("click touchstart",function(){c.close()}),t(document).on("click touchstart",".nch-lb-exit-custom",function(){c.close()}),t("li.nch-lb-prev",w).click(c.previous),t("li.nch-lb-next",w).click(c.next),t("li.nch-lb-play",w).click(c.play),t("div.nch-lb-icon-info",i).each(function(){t(this).click(d.toggleInfo)}),t("div.nch-lb-icon-zoom",i).hammer().on("tap",d.toggleZoom),i.hammer().on("tap",d.openShare),o.bgclose&&d.backgroundClose(l),n.tapping&&l.media.on("tap",function(e){if(r.current){var n=t(e.target);n.is("img")&&n.parent().hasClass("nch-lb-media")&&c.next()}})},backgroundClose:function(t){t.preview.click(function(t){t.target.className.search("nch-lb-media-space")>=0&&c.close()})},fs:{on:!1,request:function(t){return d.fs.on=!0,t.requestFullScreen?t.requestFullScreen():t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullScreen?1==t.webkitRequestFullScreen.length?t.webkitRequestFullScreen():t.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):t.mozRequestFullScreen?t.mozRequestFullScreen():d.fs.on=!1},has:function(){var t=d.fs.request(document.documentElement);return 0!=t},exit:function(){var t=document;t.cancelFullScreen?t.cancelFullScreen():t.exitFullscreen?t.exitFullscreen():t.webkitCancelFullScreen?t.webkitCancelFullScreen():t.mozCancelFullScreen&&t.mozCancelFullScreen(),d.fs.on=!1},toggle:function(){var t="nch-lb-onfs",e=r.current.main,n=e.find(".nch-lb-icon-fs");d.fs.on?(e.removeClass(t),d.fs.exit(),n.html("f")):(e.addClass(t),d.fs.request(document.documentElement),n.html("k"))}},loadThumb:function(t,e){var n;this.thumb=n=new Image,n.onload=e,n.src=t},updateLayout:function(n){function a(){r.asb||p.append(r.light[0].$el.height(f[2]+100),r.light[1].$el.height(f[2]+100))}var i=r.current,o=r.wsize=r.w.width(),s=r.hsize=r.w.height();if(i){var l,c=i.blocks,h=c.preview,u=i.opts,p=u.margin,f=[p,p,p,p],p=i.main,g=c.bthumbs,m={top:0,right:1,bottom:2,left:3},v="height",b="width",w=[v,b,v,b];g!==e&&"bottom"!=u.thumbs&&"top"!=u.thumbs&&(f[m[u.thumbs]]+=g[w[m[u.thumbs]]]()),f[0]+=c.tbar.height(),f[2]+=c.bbar.height(),l={top:f[0],left:f[3],width:o-f[1]-f[3],height:s-f[0]-f[2]},c.bbar.width(l.width+2*u.margin),c.tbar.width(l.width+2*u.margin),h.css(t.extend({},l,{left:0,width:o,height:l.height+40})),c.loadicon.css({left:l.left+l.width/2,top:l.top+l.height/2}),i.mspace=l,r.hasCanvas&&(r.light?a():r.event.on("maskload",a)),0!=i.set[i.current].opts.type&&i.set[i.current].target&&d.updateMediaLayout(i.set[i.current]),n!==e&&h.scrollLeft(r.wsize)}},light:function(t,e){if(r.hasCanvas&&""!=r.current.opts.backlight){if(r.asb&&r.current){var n=r.current.blocks.asb.get(0);return void(n.style.backgroundColor=t)}var a=arguments,i={opacity:1,display:"block"},o={opacity:0},s=r.light[0],l=r.light[1];2==a.length?t.main.append(s.$el,l.canvas):e=t;var t=[0,0,l.width,l.height];l.$el.stop().animate(o,500,function(){d.toColor(l,e),l.$el.css(i),s.$el.hide()}),d.toColor(s,e),s.$el.stop().show().css(o).animate(i,500)}},toColor:function(t,e){var n=t.width,a=t.height,i=t.context;i.clearRect(0,0,n,a),i.fillStyle=e,i.fillRect(0,0,n,a),t.mask()},masks:function(){var e=this,n=(t("div.nch-lb-mask"),t('<canvas class="nch-lb-effcurrent"></canvas>')),a=t('<canvas class="nch-lb-effchange"></canvas>');r.color="#000",r.light=r.asb?[]:[new d.canvasMask(n,e),new d.canvasMask(a,e)],r.event.trigger("maskload")},getImageURL:function(t){var e=/^url\((['"]?)(.*)\1\)$/.exec(t.css("background-image"));return e?e[2]:""},hashChange:function(){var t="";window.setInterval(function(){n.nohashes&&r.hash!=t&&0==(t=r.hash).search("#"+n.hashpath)&&d.route(t.replace("#","")),t!=window.location.hash&&0==(t=r.hash=window.location.hash).search("#"+n.hashpath)&&d.route(t.replace("#",""))},150)},route:function(t){if(i[t]!==e){var n=i[t];d.toMedia(n.call!=e?n():n)}},addRoute:function(t,e){i["nch_"+t]=e},isImage:function(t,a,i){var o=new Image,s=function(){a("image")};o.onerror=i||function(){d.getMediaType(t,a,!0)},o.onload=function(){t.target=this,t.nsize=[this.width,this.height],i===e&&!d.allowedOrigin(this)&&n.cors&&""!=n.backlight?d.isImage(t,a,s):a("image")},i!==e&&(o.crossOrigin="anonymous"),o.src=t.opts.href,r.onload=o},getMediaType:function(t,n,a){var i=t.opts;if(0!=i.type)return t.target||l[i.type]&&l[i.type].video&&i.videoid===e&&l[i.type].is(t),n(i.type);if(a){for(var a in l)if(l[a].is(t))return n(a)}else d.isImage.apply(this,arguments)},need:function(t,e,n){for(var a=t.length-1,i=0,r=function(){i++==a&&n()},o=0;a>=o;o++)e(t[o],r)},getPreview:function(t,n){var a=new Image,i=t.opts,r=i.type,o=function(){n(t)};return t.preview!==e?n(t):void(i.src?(a.onload=o,a.src=i.src,t.preview=a):l[r]&&l[r].video?(t.opts.videoid===e&&l[r].is(t),l[r].preview(t,o)):n(t))},getThumbnail:function(t,n){var a=new Image,i=t.opts,r=i.type,o=function(){n(t)};return t.thumb!==e?n(t):void(i.thumbnail?(a.onload=o,a.src=i.thumbnail,t.thumb=a):i.src?(a.onload=o,a.src=i.src,t.thumb=a):l[r]&&l[r].video?(t.opts.videoid===e&&l[r].is(t),l[r].thumb(t,o)):n(t))},renderThumbnails:function(n){var a,i,r=(n.main,n.opts),o=n.blocks,s=o.thumbs.empty(),l=0,h={bottom:1,top:1,left:0,right:0};s[h[n.opts.thumbs]?"height":"width"](n.opts.thumbsize),window.setTimeout(function(){for(var o in n.set)(a=n.set[o].thumb)!==e&&(i=(a.naturalWidth||a.width)/(a.naturalHeight||a.height),l+=r.thumbsize*(h[n.opts.thumbs]?i:1/i)+8,s.append(t("<li></li>").append(t(n.set[o].thumb).removeAttr("width","height").data("nch-lb-media",n.set[o]).click(c.open))));
s[h[n.opts.thumbs]?"width":"height"](l-6)},25),s.hammer({prevent_default:!1}).on("drag",function(){return!0}),s.mousewheel(d.scrollThumbs)},getFX:function(t,e){if(t===!1&&(e.opts.effect=t=e.group.opts.animation),"random"==t){var n=[];for(var a in o)n.push(a);e.opts.effect=e.opts.animation=t=n[Math.round(Math.random()*(n.length-1))]}return o[t]||function(){}},mediaGroup:function(e,a){var r,o,s,l=this;a||(a=d.randomName()),this.main=!1,this.name=r=a,this.opts=o=t.extend({},n,e),this.current=!1,this.set=[],this.playing=!1,this.paused=!1,this.about=!1,this.hasGestures=!1,this.add=function(t,e){var a=new d.mediaItem(t,d.inheritProps(o,e));a.group=l,a.opts.rel=r,a.index=l.set.length,a.opts.href||(a.opts.href=a.opts.src),(s=d.parseColor(a.opts.href+a.opts.src))&&(a.opts.color=s),i[n.hashpath+a.opts.hash]=a,l.set.push(a)}},allowedOrigin:function(e){if(!r.hasCanvas)return!0;var n=r.tcanvas,a=n.getContext("2d"),i=n.width,o=n.height;a.clearRect(0,0,i,o),a.drawImage(e,0,0);try{a.getImageData(0,0,1,1)}catch(s){return t(r.tcanvas).remove(),t(r.tcanvas=document.createElement("canvas")).addClass("nch-lb-testcanvas").appendTo(r.b),!1}return!0},inheritProps:function(t,n){for(var a in t)n[a]!==e&&(t[a]=n[a]);return n},mediaItem:function(e,n){var i;this.main=e,this.opts=i=t.extend({hash:d.getHash(n)},a,n),this.target=!1,this.share=!1,e.data("nch-lb-media",this),e.click(function(t){return t.preventDefault(),c.open.call(this),!1})},keyboard:function(t){var e=t.which,n=r.current;n&&n.opts.keyboard&&(32==e&&n.opts.play&&c.play(),37==e&&c.previous(!0),39==e&&c.next(!0),27==e&&c.close())},setFrom:function(n,a){var i,o=t(),s=new d.mediaGroup(a);for(var l in n)n[l].charAt!==e&&(n[l]={href:n[l]}),i=t('<a href="'+n[l].href+'"></a>'),n[l].src&&i.append('<img src="'+n[l].src+'">'),s.add(i,n[l]),o=o.add(i);return r.all[s.name]=s,o},randomName:function(){return"nch_group_"+Math.round(Math.random()*(new Date).getTime())},getHash:function(t){{var a,r,o=t.href?t.href:t.href=t.src,s=0;t.hash?1:0}if(o===e||0==(o+"").length)return s;for(a=0;a<o.length;a++)r=o.charCodeAt(a),s=(s<<5)-s+r,s&=s;if(s=Math.abs(s),i[n.hashpath+s]!==e)for(;i[n.hashpath+s]!==e;)s++;return s},getDataProperties:function(e){e.jquery&&(e=e.get(0));for(var n,a=arguments,i=a[1]?a[1]:[],r={},o=0;o<e.attributes.length;o++){var s=e.attributes[o].name;(i[s]||t.inArray(s,i)>=0||0==s.search("data-"))&&(r[i[s]?i[s]:s.replace("data-","")]=(n=e.getAttribute(s))==parseInt(n)?parseInt(n):n)}return r},canvasMask:function(t,e){if(r.hasCanvas){var n,a,i;this.$el=t,this.canvas=t=t.get(0),this.context=n=t.getContext("2d"),this.mask=e,this.width=a=t.width=e.width,this.height=i=t.height=e.height,n.drawImage(e,0,0),this.maskdata=function(t){for(var e=[],n=0,r=0;i>r;r++)for(var o=0;a>o;o++,n+=4)e.push(t.data[n]);return e}(n.getImageData(0,0,a,i)),n.clearRect(0,0,a,i),this.mask=function(){for(var t=this.maskdata,e=4*t.length,r=0,o=n.getImageData(0,0,a,i);e>r;)o.data[r+3]*=t[r/4]/255,r+=4;n.putImageData(o,0,0)}}},hexToRGB:function(t){var e=t.replace("#",""),n=e.match(/.{1,1}/g);e.length/3<2&&(e=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),e=e.match(/.{1,2}/g);for(var a=0;3>a;a++)e[a]=parseInt(e[a],16);return e},drawImageOnto:function(t,e,n,a,i,r,o){var s=this,l=arguments;try{t.drawImage(e,n,a,i,r)}catch(c){return void window.setTimeout(function(){d.drawImageOnto.apply(s,l)},0)}o()},getMainColor:function(t,e){var n,a,i,o=document.createElement("canvas"),s=o.getContext("2d"),l=0,c=0,h=o.width=200,u=o.height=200,p=[0,0,0],f=d.hexToRGB(r.current.opts.backlight);return o.getContext&&s?void d.drawImageOnto(s,t,0,0,200,200,function(){try{n=s.getImageData(0,0,h,u)}catch(t){return e(f)}for(var r=0;u>r;r++)for(var o=0;h>o;o++)a=(n.data[l]+n.data[l+1]+n.data[l+2])/3,i=Math.abs(a-n.data[l])+Math.abs(a-n.data[l+1])+Math.abs(a-n.data[l+1]),i>c&&(c=i,p=[n.data[l],n.data[l+1],n.data[l+2]]),l+=4;e(p)}):e(f)}};t.fn.nchlightbox=function(t){return c[t]?c[t].apply(this,Array.prototype.slice.call(arguments,1)):c.init.apply(this,arguments)},t.fn.nchlightbox.defaults=n,t(document).ready(function(){t(".nch-hide-if-javascript").hide(),r.b=t("body"),r.w=t(window).resize(d.updateLayout),r.doc=t(document.documentElement),d.hashChange();var a=t('<div id="nchlb_touch_device"></div>');r.b.append(a),a.position().top<0&&(r.isTouchDevice=!0),a.remove();try{("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&(r.isTouchDevice=!0)}catch(i){}r.isTouchDevice&&r.b.addClass("nch-lb-photo-menu-visible");var o;r.asb=(o=navigator.userAgent.toLowerCase()).search("android")>0&&o.search("mobile safari")>0&&o.search("linux")>0&&o.search("chrome")<0;var s=document.createElement("canvas"),i=r.root=t('<div class="nch-lb-mask"></div>').appendTo(r.b);(r.hasCanvas=!(!s.getContext||!s.getContext("2d")))&&""!=n.backlight?(h=new Image,h.onload=d.masks,h.src=d.getImageURL(i),t(r.tcanvas=document.createElement("canvas")).addClass("nch-lb-testcanvas").appendTo(r.b)):(r.hasCanvas=!1,d.masks()),r.canFS="object"==typeof Modernizr&&Modernizr.prefixed?Modernizr.prefixed("requestFullscreen",document.documentElement):d.fs.has(),d.fs.on=!1,r.w.keyup(d.keyboard);var l=t('<div class="nch-lb-scrollbars"></div>').appendTo(r.b),c=l.get(0).clientWidth,u=l.get(0).offsetWidth;c!==e&&u!==e&&u==c&&(r.scrollbar=!1),l.remove(),t(".nch-lightbox").nchlightbox()})}(jQuery),function(t,e,n,a){function i(t){for(var e=t.split("-"),n=1;n<e.length;n++)e[n]=e[n].substr(0,1).toUpperCase()+e[n].substr(1);return e.join("")}function r(t,e){var r,o=t,s=e||["ms","O","Moz","Webkit","Khtml"],c=(t=i(o)).substr(0,1).toUpperCase()+t.substr(1),h=n.documentElement;if(h.style[t]!==a)return l[o]=o,t;r=(s.join(c+"/")+c).split("/");for(var d in r)if(h.style[r[d]]!==a)return l[o]="-"+s[d].toLowerCase()+"-"+o,r[d];return!1}var o={},s={},l={},c={rotate:"deg",rotateX:"deg",rotateY:"deg",skewX:"deg",skewY:"deg",perspective:"px",scale:"",translateX:"px",translateY:"px",translateZ:"px"};!function(){for(var t=arguments,e=0;e<t.length;e++)s[t[e]]=r(t[e])}("transform","perspective","transition","transform-origin"),o.transform=function(t,e){var n=e===a?t:function(n){return n[t]=e,n}({}),i=[];if(s.transform!==!1){for(var r in n)c[r]!==a&&(n[r]+"").search(c[r])<0&&(n[r]+=c[r]),i.push(r+"("+n[r]+")");this.style[s.transform]=i.join(" ")}},o.transition=function(t){this.style.setProperty===a?this.style[s.transition]=t:this.style.setProperty(l.transition,t)},o.transformOrigin=function(t){this.style.setProperty===a?this.style[s["transform-origin"]]=t:this.style.setProperty(l["transform-origin"],t)},o.perspective=function(t){s.perspective!==!1&&((t+"").search(c.perspective)<0&&(t+=c.perspective),this.style.setProperty===a?this.style[s.perspective]=t:this.style.setProperty(l.perspective,t))},o.animate=function(t,n,i){var r=this,n=n||400,s=[l.transform].join(",")+" "+n/1e3+"s ease-in";o.transition.call(this,s),o.transform.call(this,t),e.setTimeout(function(){o.transition.call(r,"none"),i!==a&&i()},n)},t.fn.nchlightbox("access","css3",function(t){return new function(t){var e=this;this.el=t.jquery===a?t:(this.$el=t).get(0);for(var n in o)this[n]=function(t){return function(){o[t].apply(e.el,arguments)}}(n)}(t)})}(jQuery,window,document),function(t,e){function n(n,a,i){return function(r,o,s,l){if(l!==e)return 1==i?e:i*l;var c=a(o,Math.abs(o)),h=[c[0]];r.transformOrigin(c[2]||d),s&&h.push(n.fxspeed),c[0]!==e&&r[s?"animate":"transform"].apply({},h),c[1]!==e&&(h[0]=c[1],t.fn[s?"animate":"css"].apply(r.$el.stop(),h))}}var a="perspective",i="skewX",r="rotate",o="rotateX",s="rotateY",l="translateY",c="translateZ",h="opacity",d="50% 50%",u=t.fn.nchlightbox.defaults,p="scale";t.fn.nchlightbox("fx",{swipe:function(){},fade:n(u,function(t,n){var a={};return a[h]=1-n,[e,a]},1),scale:n(u,function(t,e){var n={};return n[p]=1-.6*e,[n]},1),slideUp:n(u,function(t){var e={};return e[l]=900*t,[e]},0),slideDown:n(u,function(t){var e={};return e[l]=-900*t,[e]},0),flip:n(u,function(t){var e={};return e[a]=1e3,e[s]=90*t,[e]},0),skew:n(u,function(t){var e={};return e[a]=1e3,e[i]=30*t,[e]},1),bounceDown:n(u,function(t,e){var n={};return n[a]=100,n[l]=1e3*e,[n]},1),bounceUp:n(u,function(t,e){var n={};return n[a]=100,n[l]=-1e3*e,[n]},1),hangLeft:n(u,function(t){var n={};return n[r]=-179*t,[n,e,"0% 0%"]},0),hangRight:n(u,function(t){var n={};return n[r]=-179*t,[n,e,"100% 0%"]},0),zoomIn:n(u,function(t,e){var n={},i={};return n[a]=800,n[c]=800*e,n[r]=45*t,i[h]=1-e,[n,i]},0),simpleFade:n(u,function(t,e){var n={},i={};return n[a]=0,n[c]=0,n[r]=0,i[h]=1-e,[n,i]},0),breakIn:n(u,function(t){var e={};return e[r]=45*t,[e]},1),rotateIn:n(u,function(t,e){var n={};return n[a]=1e3,n[s]=90*t,n[p]=1-.3*e,[n]},1),rotateOut:n(u,function(t,e){var n={};return n[a]=1e3,n[s]=-90*t,n[p]=1-.3*e,[n]},1),cicleDown:n(u,function(t,e){var n={},i={};return n[a]=1200,n[o]=-90*t,n[l]=200*e,i[h]=1-e,[n,i,"50% 100%"]},0),cicleUp:n(u,function(t,e){var n={},i={};return n[a]=1200,n[o]=-90*t,n[l]=-200*e,i[h]=1-e,[n,i,"50% 1%"]},0),throwIn:n(u,function(t,e){var n={},i={};return n[a]=800,n[p]=1-.6*e,n[r]=180*t,i[h]=1-e,[n,i]},.3),fall:n(u,function(t,e){var n={},i={};return n[a]=1800,n[o]=-90*e,n[r]=90*t,n[c]=-400*t,i[h]=Math.pow(1-e,.25),[n,i,d]},0),jump:n(u,function(t,e){var n={};return n[a]=1500,n[p]=1-.999*e,n[l]=300*e,n[o]=100*e,n[c]=1e3*e,[n]},0)})}(jQuery),function(t){function e(t,e){for(var n="",a=!1,i="",r=0;r<t.length;r++)a?"}"==t.charAt(r)?(e[i]&&(n+=e[i]),a=!1,i=""):i+=t.charAt(r):"{"==t.charAt(r)?a=!0:n+=t.charAt(r);return n}function n(t){return"undefined"==typeof t.has.charAt?t.has():"undefined"!=typeof window[t.has]?!0:!1}function a(t){var e=document.createElement("script");e.async=!0,e.id=t.id,e.src=t.src,r.append(e)}function i(t,a,i){for(var r,a=a.split(","),s="",l=[],c=0;c<a.length;c++)(l[c]=n(r=o[a[c]]))&&(s+=e(r.create,i));t.append(s);for(var c in a)l[c]&&o[a[c]].parse(o[a[c]].api(),t.get(0))}var r,o={fb:{has:"FB",code:"fb",api:function(){return FB},parse:function(t,e){t.XFBML.parse(e)},id:"facebook-jssdk",src:"//connect.facebook.net/en_US/all.js",create:'<div class="nchlb_like_container" data-share-nacho="true"><iframe class="fb-like" src="//www.facebook.com/plugins/like.php?layout=standard&amp;action=like&amp;show_faces=false&amp;share=false&amp;height=20&amp;href={url}" scrolling="no" frameborder="0" style="border:none; overflow:hidden; height:20px;" allowTransparency="true"></iframe></div>'},tw:{has:"twttr",code:"tw",api:function(){return twttr},parse:function(t,e){t.widgets.load(e)},id:"twitter-wjs",src:"//platform.twitter.com/widgets.js",create:'<div class="nchlb_twitter_container" data-share-nacho="true"><a href="https://twitter.com/share" class="twitter-share-button" data-url="{url}" data-text="{title}" data-count="none">Tweet</a></div>'},gp:{has:function(){return"undefined"==typeof gapi||"undefined"==typeof gapi.plusone?!1:!0},code:"gp",api:function(){return gapi.plusone},parse:function(t,e){t.go(e)},id:"",src:"//apis.google.com/js/plusone.js",create:'<div class="nchlb_google_container" data-share-nacho="true"><div class="g-plusone" data-share-nacho="true" data-size="medium" data-annotation="none" data-href="{url}"></div></div>'},pin:{has:function(){for(var t in window)if(0==t.search("PIN_"))return!0;return!1},code:"pin",api:function(){for(var t in window)if(0==t.search("PIN_")&&window[t].f)return window[t]},parse:function(e,n){for(var a,i=t(n).is("a")?[n]:n.getElementsByTagName("a"),r=e.f.render,o=0;o<i.length;o++)"undefined"!=typeof(a=t(i[o]).attr("data-pin-do"))&&0!=t(i[o]).parent(".nchlb_pinterest_container").length&&r[a](i[o])},id:"",src:"//assets.pinterest.com/js/pinit.js",create:'<div class="nchlb_pinterest_container" data-share-nacho="true"><a href="//pinterest.com/pin/create/button/?url={url}&media={media}&description={title}" data-pin-do="buttonPin" data-pin-config="none"><img src="//assets.pinterest.com/images/pidgets/pin_it_button.png" /></a></div>'}};t(window).load(function(){if($TS_VCSC_Lightbox_LoadAPIs){var e,s=$TS_VCSC_Lightbox_Social.split(",");r=t("body");for(var l in o)e=o[l],t.inArray(e.code,s)>=0&&(n(e)||a(e))}t.fn.nchlightbox("access","shareButtons",i)})}(jQuery),function(t,e,n){var a={grid:function(e,n){this.name="",this.set=e,this.opts=t.extend({},t.fn.nchgrid.defaults,n),this.images=[],this.items=[],this.cols=[],this.width=0,this.columns=0,this.filters=[],n.target||(this.opts.target=t(e.parent()))},column:function(){this.images=[],this.height=0,this.width=0,this.aspect=0,this.less=!1,this.addImage=function(t){this.images.push(t),this.aspect+=t.aspect}},getColumns:function(t,e){for(var n=0;e[n]<t;)n++;return n==e.length?n:n+1},resolveDeltaHeight:function(t,e,n,a){return(t+e*a)/(n+a)},spreadImages:function(t,e){var a=t.images,i=a.length;if(t.opts.order)for(var r=0;i>r;r++)e[r%t.columns].addImage(a[r]);else{for(var o,s=a.length,l=0,c=t.columns,h=[],r=0;c>r;r++)h.push({index:h.length,aspect:0});for(;s>l;){o=[];for(var r=0;c>r;r++)a[l+r]!=n&&o.push({aspect:1/a[l+r].aspect,index:l+r});o.sort(function(t,e){return t.aspect>e.aspect}),h.sort(function(t,e){return t.aspect<e.aspect});for(var r=0;r<o.length;r++)e[h[r].index].addImage(a[o[r].index]),h[r].aspect+=o[r].aspect;l+=c}}},renderGrid:function(e){var n=function(){a.updateGrid(e)};t(window).resize(n),jQuery(window).on("debouncedresize",function(){window.setTimeout(function(){n()},750)}),n(),window.setTimeout(function(){jQuery(window).trigger("debouncedresize")},750)},filterGrid:function(e,n){var i=e.opts,r=(e.set,e.images,e.cols),o=i.target.width();e.columns=a.getColumns(e.width=o,i.grid);var s=n.split(",");if(e.columns!=r.length){r=[];for(var l=0;l<e.columns;l++)r[l]=new a.column;a.spreadImages(e,r)}for(var l=0;l<r.length;l++){c=r[l],all=c.images;for(var h=0;h<all.length;h++)image=t(e.items[all[h].index]),groups=t.trim(image.attr("data-groups")),valid=!1,s.forEach(function(t){a.searchGrid(groups,t)&&(valid=!0)}),valid?(image.removeClass("nchgrid-tile-filtered"),image.attr("data-showing","true")):(image.addClass("nchgrid-tile-filtered"),image.attr("data-showing","false"))}},searchGrid:function(t,e){return new RegExp("\\b"+e+"\\b","i").test(t)},updateGrid:function(e){var n=e.opts,i=(e.set,e.images),r=n.target,o=e.cols,s=n.target.width();if(e.width!=s){if(e.columns=a.getColumns(e.width=s,n.grid),e.columns!=o.length){o=[];for(var l=0;l<e.columns;l++)o[l]=new a.column;a.spreadImages(e,o)}for(var c=e.width-(o.length-1)*n.margin,h=Math.floor(i.length/e.columns),d=0,u=0,l=0;l<e.columns;l++)(o[l].less=o[l].images.length==h)?d+=1/o[l].aspect:u+=1/o[l].aspect;for(var p,f,g,m=a.resolveDeltaHeight(c,n.margin,d,u),v=0,b=0,l=0;l<o.length;l++){f=o[l],all=f.images,p=1/f.aspect*(m-(f.less?0:n.margin)),b=0;for(var w=0;w<all.length;w++)g=t(e.items[all[w].index]).css({position:"absolute",left:v,top:b,width:p,height:p*all[w].aspect,display:"block"}).addClass("nchgrid-tile"),b+=p*all[w].aspect+n.margin;v+=p+n.margin}r.height(b-n.margin),"static"==r.css("position")&&r.css("position","relative")}},triggerClick:function(e){if(e.preventDefault(),!t(e.target).is("img"))if(""!=t(this).find("img").attr("data-link")&&void 0!==t(this).find("img").attr("data-link")){var n=t(this).find("img").attr("data-link"),a=t(this).find("img").attr("data-target");t.trim(a).length>0?window.open(n,a):window.location.href=n}else if(""!=t(this).find("img").attr("data-image")&&void 0!==t(this).find("img").attr("data-image")){var i=t(this).find("img").attr("data-image"),r=t(this).find("img").attr("title");t.fn.nchlightbox([{href:i,title:r}],"")}else t(this).find("img").click()},loadTiles:function(){function e(e,r,o){var s,l,c,h,d,u,p;n.images[e]={width:r,height:o,aspect:o/r,src:n.set[e].src,index:e,caption:l=n.set[e].title,thumbnail:p=n.set[e].thumbnail,groups:c=n.opts.linkGrid?t(n.set[e]).attr("data-groups"):n.set[e].groups,links:h=n.opts.linkGrid?t(n.set[e]).attr("data-link"):"",image:d=n.opts.linkGrid?t(n.set[e]).attr("data-image"):""},u=""!=h?"":""!=d?"nchgrid-lightbox":"nchgrid-nolink",n.items[e]=""!=c?(s=t('<div class="nchgrid-item '+u+'" data-thumbnail="'+p+'" data-groups="All,'+c+'" data-showing="true"></div>').insertAfter(n.set[e]).append(n.set[e])).get(0):(s=t('<div class="nchgrid-item '+u+'" data-thumbnail="'+p+'" data-groups="All,NoGroups" data-showing="true"></div>').insertAfter(n.set[e]).append(n.set[e])).get(0),n.opts.captions&&(l+"").length?s.append('<div class="nchgrid-caption"></div><div class="nchgrid-caption-text '+(n.opts.titles?"nchgrid-caption-text-always":"")+'">'+l+"</div>").click(a.triggerClick):s.append('<div class="nchgrid-caption"></div>').click(a.triggerClick),i++==n.set.length-1&&a.renderGrid(n)}var n=this,i=0,r=[],o=0,s=n.opts.random;if(this.set.each(function(a,i){var s=new Image;if(n.opts.linkGrid)if(""!=t(n.set[a]).attr("data-groups")){var l=t(n.set[a]).attr("data-groups").split(",");l.forEach(function(e){t.inArray(e,r)<0&&r.push(e)})}else o++;s.onload=function(){e(a,this.width,this.height),i.style.display="block"},s.src=this.src,i.style.display="none"}),n.opts.linkGrid&&r.length>0&&n.opts.filter){r.sort();var l=t('<div id="nch-lb-toggle-'+s+'" class="nch-lb-toggle '+n.opts.textToggleStyle+'" data-grid="nch-lb-grid-'+s+'" data-filter="nch-lb-filter-'+s+'" data-showall="nch-lb-showall-'+s+'" data-random="'+s+'">'+n.opts.textToggle+"</div>").insertBefore(n.opts.target),c=t('<div id="nch-lb-showall-'+s+'" class="nch-lb-showall '+n.opts.textShowAllStyle+'" data-grid="nch-lb-grid-'+s+'" data-filter="nch-lb-filter-'+s+'" data-random="'+s+'">'+n.opts.textShowAll+"</div>").insertBefore(n.opts.target),h=t('<select id="nch-lb-filter-'+s+'" class="nch-lb-filter" data-grid="nch-lb-grid-'+s+'" data-toggle="nch-lb-toggle-'+s+'" data-showall="nch-lb-showall-'+s+'" data-random="'+s+'" multiple="multiple"></select>').insertBefore(n.opts.target);r.forEach(function(e){t('<option value="'+e+'">'+e+"</option>").appendTo(h)}),o>0&&t('<option value="NoGroups">'+n.opts.textNoGroups+"</option>").appendTo(h)}if(n.opts.filter&&""!=n.opts.selector){var d=t("#"+n.opts.selector);"undefined"!=typeof jQuery.fn.multiSelect&&d.multiSelect({selectableHeader:"<div class='ms-header-selectable'>"+n.opts.textAvailable+"</div>",selectionHeader:"<div class='ms-header-selection'>"+n.opts.textSelected+"</div>",afterSelect:function(){},afterDeselect:function(){}}),d.on("change",function(){a.filterGrid(n,t.trim(d.val())),""!=d.val()&&null!=d.val()?c.show():c.hide()});var l=t("#"+n.opts.toggle),c=t("#"+n.opts.showall),h=t("#ms-"+n.opts.selector);h.slideToggle(),c.hide(),l.on("click",function(){h.slideToggle()}),c.on("click",function(){d.multiSelect("deselect_all")})}}},i={init:function(e){var n=this;if(!this.length){var i,r=arguments,o=e,s=[];e=t.extend({},t.fn.nchgrid.defaults,2==r.length?r[1]:{});for(var l=0;l<o.length;l++)i=new Image,i.src=o[l],s.push(i);n=this.add(s).appendTo(e.target)}return a.loadTiles.call(new a.grid(n,t.extend({},t.fn.nchgrid.defaults,e||{}))),n}};t.fn.nchgrid=function(t){return i[t]?i[t].apply(this,Array.prototype.slice.call(arguments,1)):i.init.apply(this,arguments)},t.fn.nchgrid.defaults={margin:4,grid:[240,480,720,960,1240],captions:!1,order:!1,target:!1,linkGrid:!1,random:"",filter:!1,titles:!1,selector:"",toggle:"",showall:"",textAvailable:"Available Groups",textSelected:"Filtered Groups",textNoGroups:"No Groups",textToggle:"Toggle Filter",textToggleStyle:"",textShowAll:"Show All",textShowAllStyle:""}}(jQuery,window),function(t,e,n,a){function i(t){2==(t.gesture.srcEvent.type+"").split("touch").length&&(l=!0),c.off("touch",i)}function r(e,n,i){function r(){b.cwidth=b.container.width(),b.cheight=b.container.height()}function o(t){return t=t===a?1:t,{e:[t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1]}}function c(t){return t.e.join(", ")}function h(t){var e=b.width*t-b.cwidth,n=b.height*t-b.cheight;I=-Math.abs(0>e?0:e),L=-Math.abs(0>n?0:n)}var d,u,p,f=1,g=0,m=0,v=!1,b=this;this._el=s(e),this.$el=e.css({display:"block"}),this.container=p=t("<div></div>").insertAfter(e).append(e),this._container=p.hammer({prevent_default:!0}),this.width=e.get(0).width||e.width(),this.height=e.get(0).height||e.height(),this.scale=1,this.centerX=.5,this.centerY=.5,this.translateX=0,this.translateY=0,this.transform=b.transform=o(),this._el.transformOrigin("0 0"),this.container.css({width:n||this.width,height:i||this.height,overflow:l?"hidden":"auto"});var w,y,x,k,C,S,_,T,g=0,m=0,z=0,I=0,L=0,A=0,F=0,M=0,G=!1,j=!1;r(),this.transformStart=function(t){j&&(j=!1,b.dragEnd(t)),r(),G=!0,w=t.gesture.center.pageX,y=t.gesture.center.pageY,x=p.scrollLeft(),k=p.scrollTop(),C=p.offset(),S=C.left,_=C.top,b.centerX=d=(w-S-g-F)/b.width/b.scale,d=0>d?0:d>1?1:d,b.centerY=u=(y-_-m-M)/b.height/b.scale,u=0>u?0:u>1?1:u},this.drag=function(t){if(!G){v=t.gesture,F=v.deltaX+g+z,M=v.deltaY+m+A,h(f);var e=o(f);e.e[12]=F=0>F?F>I?F:I:0,e.e[13]=M=0>M?M>L?M:L:0,b._el.transform("matrix3d",c(T=e))}},this.pinch=function(t){G=!0,v=t.gesture,f=b.scale*v.scale,1>f&&(f=1),f>4&&(f=4),h(f),z=(b.scale-f)*b.width*b.centerX+g+F,A=(b.scale-f)*b.height*b.centerY+m+F;var e=o(f);e.e[12]=z=0>z?z>I?z:I:0,e.e[13]=A=0>A?A>L?A:L:0,b._el.transform("matrix3d",c(T=e))},this.transformEnd=function(){b.scale=f,b.transform=T,G=!0,g=z,m=A,F=M=z=A=0},this.dragEnd=function(){return j=!1,G?void(G=!1):(b.transform=T,g=F,m=M,void(z=A=F=M=0))},this.dragStart=function(){r(),G||(G=!1,j=!0)},l&&this._container.on("transformstart",this.transformStart).on("transform",this.pinch).on("transformend",this.transformEnd).on("dragstart",this.dragStart).on("drag",this.drag).on("dragend",this.dragEnd)}var o=t.fn.nchlightbox("access"),s=o.css3,l=!1,c=t(e).hammer();c.on("touch",i),t.fn.nchlightbox("access","pinch",function(e,n){var i;return t(this).each(function(o,s){var l;s=t(s),s.data("nch-pinchzoom",l=new r(s,e,n)),i===a?i=t(l.container):i.add(l.container)}),i})}(jQuery,window,document);